<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Python模块三day1, Gengtianba&#39;s Blog">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Python模块三day1 | Gengtianba&#39;s Blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Gengtianba's Blog" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Gengtianba&#39;s Blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Gengtianba&#39;s Blog</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/4.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Python模块三day1</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E7%AC%94%E8%AE%B0/">
                                <span class="chip bg-color">笔记</span>
                            </a>
                        
                            <a href="/tags/python/">
                                <span class="chip bg-color">python</span>
                            </a>
                        
                            <a href="/tags/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/">
                                <span class="chip bg-color">第三阶段</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" class="post-category">
                                路飞学院
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-06-15
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    20.8k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    98 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="第三模块-面向对象-amp-网络-amp-并发编程"><a href="#第三模块-面向对象-amp-网络-amp-并发编程" class="headerlink" title="第三模块 面向对象&amp;网络&amp;并发编程"></a>第三模块 面向对象&amp;网络&amp;并发编程</h1><img src="/2022/06/15/python-mo-kuai-san-day1/image-20210117230507748-16552576104391.png" class="">

<p>从今天开始，我们将进入系列课程第3个模块的的学习，此模块包含如下三大部分知识：</p>
<ul>
<li><p>面向对象，Python中支持两种编程方式来写代码，分别是：<code>函数式编程</code>、<code>面向对象式编程</code>。</p>
<ul>
<li><p>函数式</p>
<pre class="language-python" data-language="python"><code class="language-python"># 定义函数，在函数中实现功能
def func():
	print(&quot;一个NB的功能&quot;)

# 执行函数
func()</code></pre>
</li>
<li><p>面向对象：<strong>后期功能更复杂，解决可扩展性时使用</strong></p>
<pre class="language-python" data-language="python"><code class="language-python"># 定义类
class Foo(object):
    # 在类中定义方法
    def func(self):
        print(&quot;一个NB的功能&quot;)
    
# 实例化类的对象
obj &#x3D; Foo()
# 执行类中的方法
obj.func()</code></pre></li>
</ul>
<p>Python支持两种编程方式（其他很多语言只支持一种），所以初学者在刚开始学习往往不知道应如何选择，并且行业内对于 函数式编程 vs 面向对象编程 之间谁更好的讨论也是难分胜负，其实在开发中无论要实现什么样的功能，两种编程模式都能实现，哪种让我们能更好实现就选择谁？不必非纠结于那种方式更好，编程语言支持工具，最重要的是把功能实现。</p>
<p>初学者在选择编程方式时候，<font color="#dd0000"><strong>可以遵循如下规则</strong></font>：</p>
<ul>
<li><p>函数式，推荐初学者使用。理由：<strong>上手快且逻辑简单清晰。</strong></p>
</li>
<li><p>面向对象，推荐有一些代码经验后使用。理由：<strong>面向对象的思想需要有一定的项目积累之后（写多了&amp;看的多）才能真正理解其精髓，基于面向对象可以编写出扩展性更强的代码（在一定程序上也可以简化代码）。</strong></p>
</li>
</ul>
<p>现阶段，大家在学习面向对象时更重要的是：<font color="#dd0000"><strong>掌握相关知识点 &amp; 读懂源码 &amp; 编写简单的基于面向对象的程序。</strong></font></p>
</li>
<li><p>网络编程，学习网络知识后，可以让我们的程序<strong>通过网络来进行数据交互和传输 并 掌握其本质。</strong></p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210117224420539-16552576104392.png" class="">
</li>
<li><p>并发编程，一个程序想要执行的<strong>速度更快</strong>是必须要掌握并发编程的相关知识。</p>
<pre class="language-none"><code class="language-none">例如：下载10个抖音视频，每个需要2分钟。
- 按照以前的思路，逐一下载就需要20分钟。
- 按照并发的思路，创建10个线程&#x2F;进程来实现，大概需要2分钟就可以完成。</code></pre></li>
</ul>
<h1 id="十八、面向对象基础"><a href="#十八、面向对象基础" class="headerlink" title="十八、面向对象基础"></a>十八、面向对象基础</h1><img src="/2022/06/15/python-mo-kuai-san-day1/image-20210118204107085-16552576104393.png" class="">

<p>课程目标：了解面向对象并可以根据面向对象知识进行编写代码。</p>
<p>课程概要：</p>
<ul>
<li>初识面向对象</li>
<li>三大特性（面向对象）<ul>
<li>封装</li>
<li>继承</li>
<li>多态</li>
</ul>
</li>
<li>再看数据类型</li>
</ul>
<h2 id="1-初识面向对象"><a href="#1-初识面向对象" class="headerlink" title="1. 初识面向对象"></a>1. 初识面向对象</h2><p>想要通过面向对象去实现某个或某些功能时需要2步：</p>
<ul>
<li><p>定义类，在类中定义方法，在方法中去实现具体的功能。</p>
</li>
<li><p>实例化类并的个一个对象，通过对象去调用并执行方法。</p>
</li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python">class Message:

    def send_email(self, email, content):
        data &#x3D; &quot;给&#123;&#125;发邮件，内容是：&#123;&#125;&quot;.format(email,content)
        print(data)


msg_object &#x3D; Message() # 实例化一个对象 msg_object，创建了一个一块区域。
msg_object.send_email(&quot;wupeiqi@live.com&quot;,&quot;注册成功&quot;)</code></pre>

<p><strong>注意</strong>：</p>
<ol>
<li><p>类名称首字母大写&amp;驼峰式命名；</p>
</li>
<li><p>py3之后默认类都继承object；</p>
</li>
<li><p>在类中编写的函数称为方法；</p>
</li>
<li><p>每个方法的第一个参数是self。</p>
</li>
</ol>
<p>类中可以定义多个方法，例如：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Message:

    def send_email(self, email, content):
        data &#x3D; &quot;给&#123;&#125;发邮件，内容是：&#123;&#125;&quot;.format(email, content)
        print(data)

    def send_wechat(self, vid, content):
        data &#x3D; &quot;给&#123;&#125;发微信，内容是：&#123;&#125;&quot;.format(vid, content)
        print(data)


msg_object &#x3D; Message()
msg_object.send_email(&quot;wupeiqi@live.com&quot;, &quot;注册成功&quot;)
msg_object.send_wechat(&quot;武沛齐&quot;, &quot;注册成功&quot;)</code></pre>

<p>你会发现，用面向对象编程写的类有点像归类的意思：将某些相似的函数划分到一个类中。</p>
<p>但，这种编写方式让人感觉有些鸡肋，直接用 函数 写多好呀。对吧？ </p>
<p>别着急，接着往下看。</p>
<h3 id="1-1-对象和self"><a href="#1-1-对象和self" class="headerlink" title="1.1 对象和self"></a>1.1 对象和self</h3><p>在每个类中都可以定义个特殊的：<code>__init__ 初始化方法 </code>，在实例化类创建对象时自动执行，即：<code>对象=类()</code>。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Message:

    def __init__(self, content):
        self.data &#x3D; content

    def send_email(self, email):
        data &#x3D; &quot;给&#123;&#125;发邮件，内容是：&#123;&#125;&quot;.format(email, self.data)
        print(data)

    def send_wechat(self, vid):
        data &#x3D; &quot;给&#123;&#125;发微信，内容是：&#123;&#125;&quot;.format(vid, self.data)
        print(data)

# 对象 &#x3D; 类名() # 自动执行类中的 __init__ 方法。

# 1. 根据类创建一个对象，内存的一块 区域 。
# 2. 执行__init__方法，模块会将创建的那块区域的内存地址当self参数传递进去。    往区域中(data&#x3D;&quot;注册成功&quot;)
msg_object &#x3D; Message(&quot;注册成功&quot;)

msg_object.send_email(&quot;wupeiqi@live.com&quot;) # 给wupeiqi@live.com发邮件，内容是：注册成功
msg_object.send_wechat(&quot;武沛齐&quot;) # 给武沛齐发微信，内容是：注册成功</code></pre>

<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210123195714019-16552576104404.png" class="">

<p>通过上述的示例，你会发现：</p>
<ul>
<li><font color="#dd0000"><strong>对象</strong></font>，让我们可以在它的内部先封装一部分数据，以后想要使用时，再去里面获取。</li>
<li><font color="#dd0000"><strong>self</strong></font>，类中的方法需要由这个类的对象来触发并执行（ 对象.方法名 ），且在执行时会自动将对象当做参数传递给self，以供方法中获取对象中已封装的值。</li>
</ul>
<p>注意：除了self默认参数以外，方法中的参数的定义和执行与函数是相同。</p>
<p>当然，根据类也可以创建多个对象并执行其中的方法，例如：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Message:

    def __init__(self, content):
        self.data &#x3D; content

    def send_email(self, email):
        data &#x3D; &quot;给&#123;&#125;发邮件，内容是：&#123;&#125;&quot;.format(email, self.data)
        print(data)

    def send_wechat(self, vid):
        data &#x3D; &quot;给&#123;&#125;发微信，内容是：&#123;&#125;&quot;.format(vid, self.data)
        print(data)


msg_object &#x3D; Message(&quot;注册成功&quot;)
msg_object.send_email(&quot;wupeiqi@live.com&quot;) # 给wupeiqi@live.com发邮件，内容是：注册成功
msg_object.send_wechat(&quot;武沛齐&quot;)


login_object &#x3D; Message(&quot;登录成功&quot;)
login_object.send_email(&quot;wupeiqi@live.com&quot;) # 给wupeiqi@live.com发邮件，内容是：登录成功
login_object.send_wechat(&quot;武沛齐&quot;)</code></pre>

<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210123195714019-16552576104404.png" class="">



<p><font color="#dd0000"><strong>面向对象的思想：将一些数据封装到对象中，在执行方法时，再去对象中获取。</strong></font></p>
<p><font color="#dd0000"><strong>函数式的思想：函数内部需要的数据均通过参数的形式传递。</strong></font></p>
<ul>
<li><font color="#dd0000"><strong>self</strong></font>，本质上就是一个参数。这个参数是Python内部会提供，其实本质上就是调用当前方法的那个对象。</li>
<li><font color="#dd0000"><strong>对象</strong></font>，基于类实例化出来”一块内存“，默认里面没有数据；经过类的 <code>__init__</code>方法，可以在内存中初始化一些数据。</li>
</ul>
<h3 id="1-2-常见成员"><a href="#1-2-常见成员" class="headerlink" title="1.2 常见成员"></a>1.2 常见成员</h3><p>在编写面向对象相关代码时，最常见成员有：</p>
<ul>
<li>实例变量，属于对象，只能通过对象调用。</li>
<li>绑定方法，属于类，通过对象调用 或 通过类调用。</li>
</ul>
<p>注意：还有很多其他的成员，后续再来介绍。</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210126140807446-16552576104405.png" class="" title="image-20210126140807446">

<pre class="language-python" data-language="python"><code class="language-python">class Person:

    def __init__(self, n1, n2):
        # 实例变量
        self.name &#x3D; n1
        self.age &#x3D; n2
	
    # 绑定方法
    def show(self):
        msg &#x3D; &quot;我叫&#123;&#125;，今年&#123;&#125;岁。&quot;.format(self.name, self.age)
        print(msg)

    def all_message(self):
        msg &#x3D; &quot;我是&#123;&#125;人，我叫&#123;&#125;，今年&#123;&#125;岁。&quot;.format(Person.country, self.name, self.age)
        print(msg)

    def total_message(self):
        msg &#x3D; &quot;我是&#123;&#125;人，我叫&#123;&#125;，今年&#123;&#125;岁。&quot;.format(self.country, self.name, self.age)
        print(msg)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"># 执行绑定方法
p1 &#x3D; Person(&quot;武沛齐&quot;,20)
p1.show()
# 或
# p1 &#x3D; Person(&quot;武沛齐&quot;,20)
# Person.show(p1)


# 初始化，实例化了Person类的对象叫p1
p1 &#x3D; Person(&quot;武沛齐&quot;,20)


</code></pre>



<h3 id="1-3-应用示例"><a href="#1-3-应用示例" class="headerlink" title="1.3 应用示例"></a>1.3 应用示例</h3><ol>
<li><p>将数据封装到一个对象，便于以后使用。</p>
<pre class="language-python" data-language="python"><code class="language-python">class UserInfo:
    def __init__(self, name, pwd,age):
        self.name &#x3D; name
        self.password &#x3D; pwd
        self.age &#x3D; age


def run():
    user_object_list &#x3D; []
    # 用户注册
    while True:
        user &#x3D; input(&quot;用户名：&quot;)
        if user.upper() &#x3D;&#x3D; &quot;Q&quot;:
            break
        pwd &#x3D; input(&quot;密码&quot;)
        
        # user_object对象中有：name&#x2F;password
        user_object &#x3D; UserInfo(user, pwd,19)
        # user_dict &#x3D; &#123;&quot;name&quot;:user,&quot;password&quot;:pwd&#125;
        
        user_object_list.append(user_object)
     # user_object_list.append(user_dict)

    # 展示用户信息
    for obj in user_object_list:
        print(obj.name, obj.password)
        
总结：
	- 数据封装到对象，以后再去获取。
    - 规范数据（约束）</code></pre>

<p>注意：用字典也可以实现做封装，只不过字典在操作值时还需要自己写key，面向对象只需要 <code>.</code> 即可获取对象中封装的数据。</p>
</li>
<li><p>将数据分装到对象中，在方法中对原始数据进行加工处理。</p>
<pre class="language-python" data-language="python"><code class="language-python">user_list &#x3D; [&quot;用户-&#123;&#125;&quot;.format(i) for i in range(1,3000)]

# 分页显示，每页显示10条
while True:
    page &#x3D; int(input(&quot;请输入页码：&quot;))

    start_index &#x3D; (page - 1) * 10
    end_index &#x3D; page * 10

    page_data_list &#x3D; user_list[start_index:end_index]
    for item in page_data_list:
        print(item)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Pagination:
    def __init__(self, current_page, per_page_num&#x3D;10):
        self.per_page_num &#x3D; per_page_num
        
        # 判断页码是否是数字
        if not current_page.isdecimal():
            self.current_page &#x3D; 1
            return
        current_page &#x3D; int(current_page)
        # 判断页码是否在页码范围
        if current_page &lt; 1:
            self.current_page &#x3D; 1
            return
        self.current_page &#x3D; current_page

    def start(self):
        return (self.current_page - 1) * self.per_page_num

    def end(self):
        return self.current_page * self.per_page_num


user_list &#x3D; [&quot;用户-&#123;&#125;&quot;.format(i) for i in range(1, 3000)]

# 分页显示，每页显示10条
while True:
    page &#x3D; input(&quot;请输入页码：&quot;)
	
    # page，当前访问的页码
    # 10，每页显示10条数据
	# 内部执行Pagination类的__init__方法。
    pg_object &#x3D; Pagination(page, 20)
    page_data_list &#x3D; user_list[ pg_object.start() : pg_object.end() ]
    for item in page_data_list:
        print(item)</code></pre>



<p>还有这个示例：将数据封装到一个对象中，然后在方法中对已封装的数据进行操作。</p>
<pre class="language-python" data-language="python"><code class="language-python">import os
import requests


class DouYin:
    def __init__(self, folder_path):
        self.folder_path &#x3D; folder_path
        
        if not os.path.exists(folder_path):
            os.makedirs(folder_path)
            

    def download(self, file_name, url):
        res &#x3D; requests.get(
            url&#x3D;url,
            headers&#x3D;&#123;
                &quot;user-agent&quot;: &quot;Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;87.0.4280.88 Safari&#x2F;537.36 FS&quot;
            &#125;
        )
        file_path &#x3D; os.path.join(self.folder_path, file_name)
        with open(file_path, mode&#x3D;&#39;wb&#39;) as f:
            f.write(res.content)
            f.flush()

    def multi_download(self, video_list):
        for item in video_list:
            self.download(item[0], item[1])


if __name__ &#x3D;&#x3D; &#39;__main__&#39;:
    douyin_object &#x3D; DouYin(&quot;videos&quot;)

    douyin_object.download(
        &quot;罗斯.mp4&quot;,
        &quot;https:&#x2F;&#x2F;aweme.snssdk.com&#x2F;aweme&#x2F;v1&#x2F;playwm&#x2F;?video_id&#x3D;v0200f240000buuer5aa4tij4gv6ajqg&quot;
    )

    video_list &#x3D; [
        (&quot;a1.mp4&quot;, &quot;https:&#x2F;&#x2F;aweme.snssdk.com&#x2F;aweme&#x2F;v1&#x2F;playwm&#x2F;?video_id&#x3D;v0300fc20000bvi413nedtlt5abaa8tg&quot;),
        (&quot;a2.mp4&quot;, &quot;https:&#x2F;&#x2F;aweme.snssdk.com&#x2F;aweme&#x2F;v1&#x2F;playwm&#x2F;?video_id&#x3D;v0d00fb60000bvi0ba63vni5gqts0uag&quot;),
        (&quot;a3.mp4&quot;, &quot;https:&#x2F;&#x2F;aweme.snssdk.com&#x2F;aweme&#x2F;v1&#x2F;playwm&#x2F;?video_id&#x3D;v0200f240000buuer5aa4tij4gv6ajqg&quot;)
    ]
    douyin_object.multi_download(video_list)

</code></pre>
</li>
<li><p>根据类创建多个对象，在方法中对对象中的数据进行修改。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Police:
    &quot;&quot;&quot;警察&quot;&quot;&quot;

    def __init__(self, name, role):
        self.name &#x3D; name
        self.role &#x3D; role
        if role &#x3D;&#x3D; &quot;队员&quot;:
            self.hit_points &#x3D; 200
        else:
            self.hit_points &#x3D; 500

    def show_status(self):
        &quot;&quot;&quot; 查看警察状态 &quot;&quot;&quot;
        message &#x3D; &quot;警察&#123;&#125;的生命值为:&#123;&#125;&quot;.format(self.name, self.hit_points)
        print(message)

    def bomb(self, terrorist_list):
        &quot;&quot;&quot; 投炸弹，炸掉恐怖分子 &quot;&quot;&quot;
        for terrorist in terrorist_list:
            terrorist.blood -&#x3D; 200
            terrorist.show_status()

&quot;&quot;&quot;
p1 &#x3D; Police(&quot;武沛齐&quot;,&quot;队员&quot;)
p1.show_status()
p1.bomb([&quot;alex&quot;,&quot;李杰&quot;])

p2 &#x3D; Police(&quot;日天&quot;,&quot;队长&quot;)
p2.show_status()
p2.bomb([&quot;alex&quot;,&quot;李杰&quot;])
&quot;&quot;&quot;



class Terrorist:
    &quot;&quot;&quot; 恐怖分子 &quot;&quot;&quot;

    def __init__(self, name, blood&#x3D;300):
        self.name &#x3D; name
        self.blood &#x3D; blood

    def shoot(self, police_object):
        &quot;&quot;&quot; 开枪射击某个警察 &quot;&quot;&quot;
        police_object.hit_points -&#x3D; 5
        police_object.show_status()
        
        self.blood -&#x3D; 2

    def strafe(self, police_object_list):
        &quot;&quot;&quot; 扫射某些警察 &quot;&quot;&quot;
        for police_object in police_object_list:
            police_object.hit_points -&#x3D; 8
            police_object.show_status()

    def show_status(self):
        &quot;&quot;&quot; 查看恐怖分子状态 &quot;&quot;&quot;
        message &#x3D; &quot;恐怖分子&#123;&#125;的血量值为:&#123;&#125;&quot;.format(self.name, self.blood)
        print(message)

&quot;&quot;&quot;
t1 &#x3D; Terrorist(&#39;alex&#39;)
t2 &#x3D; Terrorist(&#39;李杰&#39;,200)
&quot;&quot;&quot;
        
def run():
    # 1.创建3个警察
    p1 &#x3D; Police(&quot;武沛齐&quot;, &quot;队员&quot;)
    p2 &#x3D; Police(&quot;苑昊&quot;, &quot;队员&quot;)
    p3 &#x3D; Police(&quot;于超&quot;, &quot;队长&quot;)

    # 2.创建2个匪徒
    t1 &#x3D; Terrorist(&quot;alex&quot;)
    t2 &#x3D; Terrorist(&quot;eric&quot;)
    

    # alex匪徒射击于超警察
    t1.shoot(p3)

    # alex扫射
    t1.strafe([p1, p2, p3])

    # eric射击苑昊
    t2.shoot(p2)

    # 武沛齐炸了那群匪徒王八蛋
    p1.bomb([t1, t2])
    
    # 武沛齐又炸了一次alex
    p1.bomb([t1])


if __name__ &#x3D;&#x3D; &#39;__main__&#39;:
    run()</code></pre></li>
</ol>
<p>总结：</p>
<ul>
<li>仅做数据封装（示例一）。</li>
<li>封装数据 + 方法再对数据进行加工处理（示例二）。</li>
<li>创建同一类的数据且同类数据可以具有相同的功能（方法）（示例三）。</li>
</ul>
<h2 id="2-三大特性"><a href="#2-三大特性" class="headerlink" title="2. 三大特性"></a>2. 三大特性</h2><p>面向对象编程在很多语言中都存在，这种编程方式有三大特性：封装、继承、多态。</p>
<h3 id="2-1-封装"><a href="#2-1-封装" class="headerlink" title="2.1 封装"></a>2.1 封装</h3><p>封装主要体现在两个方面：</p>
<ul>
<li>将同一类方法封装到了一个类中，例如上述示例中：匪徒的相关方法都写在Terrorist类中；警察的相关方法都写在Police类中。</li>
<li>将数据封装到了对象中，在实例化一个对象时，可以通过<code>__init__</code>初始化方法在对象中封装一些数据，便于以后使用。</li>
</ul>
<h3 id="2-2-继承"><a href="#2-2-继承" class="headerlink" title="2.2 继承"></a>2.2 继承</h3><p>传统的理念中有：儿子可以继承父亲的财产。</p>
<p>在面向对象中也有这样的理念，即：子类可以继承父类中的方法和类变量（不是拷贝一份，父类的还是属于父类，子类可以继承而已）。</p>
<pre class="language-none"><code class="language-none">父类
子类

基类
派生类</code></pre>



<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210126182724313-16552576104406.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">class Base:

    def func(self):
        print(&quot;Base.func&quot;)

class Son(Base):
    
    def show(self):
        print(&quot;Son.show&quot;)
        
s1 &#x3D; Son()
s1.show()
s1.func() # 优先在自己的类中找，自己没有才去父类。

s2 &#x3D; Base()
s2.func()</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class Base:
    def f1(self):
        pass

class Foo(Base):

    def f2(self):
        pass
    
class Bar(Base):
    
    def f3(self):
        pass
    
o1 &#x3D; Foo()
o1.f2()
o1.f1()</code></pre>



<h3 id="练习题"><a href="#练习题" class="headerlink" title="练习题"></a>练习题</h3><pre class="language-python" data-language="python"><code class="language-python">class Base:

    def f1(self):
        print(&#39;base.f1&#39;)


class Foo(Base):

    def f2(self):
        print(&#39;foo.f2&#39;)


obj &#x3D; Foo()
obj.f1()  # &#39;base.f1&#39;
obj.f2()  # &#39;foo.f2&#39;
</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class Base:
    def f1(self):
        print(&#39;base.f1&#39;)
        
class Foo(Base):
    def f2(self):
        print(&#39;before&#39;)
        self.f1() # 调用了f1方法   obj.f1()
        print(&#39;foo.f2&#39;)
        
obj &#x3D; Foo()
obj.f2()

&gt;&gt;&gt; before
&gt;&gt;&gt; base.f1
&gt;&gt;&gt; foo.f2</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class Base:
    def f1(self):
        print(&#39;base.f1&#39;)
        
class Foo(Base):
    def f2(self):
        print(&quot;before&quot;)
        self.f1() # obj,Foo类创建出来的对象。 obj.f1
        print(&#39;foo.f2&#39;)
	def f1(self):
        print(&#39;foo.f1&#39;)
        
obj &#x3D; Foo()
obj.f1() # obj对象到底是谁？优先就会先去谁里面找。
obj.f2()

&gt;&gt;&gt; foo.f1
&gt;&gt;&gt; before
&gt;&gt;&gt; foo.f1
&gt;&gt;&gt; foo.f2</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class Base:
    def f1(self):
        print(&#39;before&#39;)
        self.f2() # slef是obj对象（Foo类创建的对象） obj.f2
        print(&#39;base.f1&#39;)
        
	def f2(self):
        print(&#39;base.f2&#39;)
        
class Foo(Base):
    def f2(self):
        print(&#39;foo.f2&#39;)
        
obj &#x3D; Foo()
obj.f1() # 优先去Foo类中找f1，因为调用f1的那个对象是Foo类创建出来的。


&gt;&gt;&gt; before
&gt;&gt;&gt; foo.f2
&gt;&gt;&gt; base.f1

b1 &#x3D; Base()
b1.f1()

&gt;&gt;&gt; before
&gt;&gt;&gt; base.f2
&gt;&gt;&gt; base.f1</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class TCPServer:
    def f1(self):
        print(&quot;TCPServer&quot;)

class ThreadingMixIn:
    def f1(self):
        print(&quot;ThreadingMixIn&quot;)

class ThreadingTCPServer(ThreadingMixIn, TCPServer): 
    def run(self):
        print(&#39;before&#39;)
        self.f1()
        print(&#39;after&#39;)
        
obj &#x3D; ThreadingTCPServer()
obj.run()

&gt;&gt;&gt; before
&gt;&gt;&gt; ThreadingMixIn
&gt;&gt;&gt; after</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class BaseServer:
    def serve_forever(self, poll_interval&#x3D;0.5):
        self._handle_request_noblock()
	def _handle_request_noblock(self):
        self.process_request(request, client_address)
        
	def process_request(self, request, client_address):
        pass
    
class TCPServer(BaseServer):
    pass

class ThreadingMixIn:
    def process_request(self, request, client_address):
        pass
    
class ThreadingTCPServer(ThreadingMixIn, TCPServer): 
    pass

obj &#x3D; ThreadingTCPServer()
obj.serve_forever()</code></pre>

<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210126192330261-16552576104407.png" class="">



<p>小结：</p>
<ul>
<li>执行对象.方法时，优先去当前对象所关联的类中找，没有的话才去她的父类中查找。</li>
<li>Python支持多继承：先继承左边、再继承右边的。</li>
<li>self到底是谁？去self对应的那个类中去获取成员，没有就按照继承关系向上查找 。</li>
</ul>
<h3 id="2-3-多态"><a href="#2-3-多态" class="headerlink" title="2.3 多态"></a>2.3 多态</h3><p>多态，按字面翻译其实就是多种形态。</p>
<ul>
<li>其他编程语言多态</li>
<li>Python中多态</li>
</ul>
<p>其他编程语言中，是不允许这样类编写的，例如：Java</p>
<pre class="language-java" data-language="java"><code class="language-java">class Cat&#123;  
    public void eat() &#123;  
        System.out.println(&quot;吃鱼&quot;);  
    &#125;  
&#125;

class Dog &#123;  
    public void eat() &#123;  
        System.out.println(&quot;吃骨头&quot;);  
    &#125;  
    public void work() &#123;  
        System.out.println(&quot;看家&quot;);  
    &#125;  
&#125;


public class Test &#123;
   public static void main(String[] args) &#123;
       obj1 &#x3D; Cat()
	   obj2 &#x3D; Cat()
       show(obj1)
       show(obj2)
           
		obj3 &#x3D; Dog()
        show(obj3)
   &#125;  
    
    public static void show(Cat a)  &#123;
      a.eat()
    &#125;  
&#125; </code></pre>

<pre class="language-java" data-language="java"><code class="language-java">abstract class Animal &#123;  
    abstract void eat();  
&#125;  

class Cat extends Animal &#123;  
    public void eat() &#123;  
        System.out.println(&quot;吃鱼&quot;);  
    &#125;  
&#125;

class Dog extends Animal &#123;  
    public void eat() &#123;  
        System.out.println(&quot;吃骨头&quot;);  
    &#125;  
    public void work() &#123;  
        System.out.println(&quot;看家&quot;);  
    &#125;  
&#125;


public class Test &#123;
   public static void main(String[] args) &#123;
       obj1 &#x3D; Cat()
       show(obj1)
           
	   obj2 &#x3D; Dog()
	   show(obj2)
   &#125;  
    
    public static void show(Animal a)  &#123;
      a.eat()
    &#125;  
&#125; </code></pre>

<p>在java或其他语言中的多态是基于：接口 或 抽象类和抽象方法来实现，让数据可以以多种形态存在。</p>
<p>在Python中则不一样，由于Python对数据类型没有任何限制，所以他天生支持多态。</p>
<pre class="language-python" data-language="python"><code class="language-python">def func(arg):
    v1 &#x3D; arg.copy() # 浅拷贝
    print(v1)
    
func(&quot;武沛齐&quot;)
func([11,22,33,44])</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Email(object):
    def send(self):
        print(&quot;发邮件&quot;)

        
class Message(object):
    def send(self):
        print(&quot;发短信&quot;)
        
        
        
def func(arg):
    v1 &#x3D; arg.send()
    print(v1)
    

v1 &#x3D; Email()
func(v1)

v2 &#x3D; Message()
func(v2)</code></pre>

<p>在程序设计中，鸭子类型（duck typing）是动态类型的一种风格。在鸭子类型中，关注点在于对象的行为，能作什么；而不是关注对象所属的类型，例如：一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟可以被称为鸭子。</p>
<h4 id="【面试题】-谈谈你对面向对象三大特性的理解"><a href="#【面试题】-谈谈你对面向对象三大特性的理解" class="headerlink" title="【面试题】 谈谈你对面向对象三大特性的理解"></a><font color="#dd0000"><strong>【面试题】 谈谈你对面向对象三大特性的理解</strong></font></h4><ul>
<li><p>封装，将方法封装到类中 或 将数据封装到对象中，便于以后使用。</p>
</li>
<li><p>继承，将类中的公共的方法提取到基类中去实现。</p>
</li>
<li><p>多态，Python默认支持多态（这种方式称之为鸭子类型），最简单的基础下面的这段代码即可。</p>
<pre class="language-python" data-language="python"><code class="language-python">def func(arg):
    v1 &#x3D; arg.copy() # 浅拷贝
    print(v1)
    
func(&quot;武沛齐&quot;)
func([11,22,33,44])</code></pre></li>
</ul>
<h2 id="3-扩展：再看数据类型"><a href="#3-扩展：再看数据类型" class="headerlink" title="3. 扩展：再看数据类型"></a>3. 扩展：再看数据类型</h2><p>在初步了解面向对象之后，再来看看我们之前学习的：str、list、dict等数据类型，他们其实都一个类，根据类可以创建不同类的对象。</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210118203012874-16552576104408.png" class="">



<pre class="language-python" data-language="python"><code class="language-python"># 实例化一个str类的对象v1
v1 &#x3D; str(&quot;武沛齐&quot;) 

# 通过对象执行str类中的upper方法。
data &#x3D; v1.upper()

print(data)</code></pre>





<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li><p>类和对象的关系。</p>
</li>
<li><p>面向对象编程中常见的成员：</p>
<ul>
<li>绑定方法</li>
<li>实例变量</li>
</ul>
</li>
<li><p>self到底是什么？</p>
</li>
<li><p>面向对象的三大特性。</p>
</li>
<li><p>面向对象的应用场景</p>
<ol>
<li>数据封装。</li>
<li>封装数据 + 方法再对数据进行加工处理。</li>
<li>创建同一类的数据且同类数据可以具有相同的功能（方法）。</li>
</ol>
</li>
<li><p>补充：在Python3中编写类时，默认都会继承object（即使不写也会自动继承）。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo:
    pass

class Foo(object):
    pass</code></pre>

<p>这一点在Python2是不同的：</p>
<ul>
<li>继承object，新式类：继承时深度优先</li>
<li>不继承object，经典类：继承是广度优先</li>
</ul>
</li>
</ol>
<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><ol>
<li><p>简述面向对象三大特性?</p>
<p>答：</p>
<ul>
<li>封装性：将共同的功能封装到类中；将相同的属性封装到对象中</li>
<li>继承性：将不同类的公共方法封装到基类中去</li>
<li>多态性：Python对参数的类型没有限制，默认支持多态（鸭子类型）</li>
</ul>
</li>
<li><p>将以下函数改成类的方式并调用 :  </p>
<pre class="language-python" data-language="python"><code class="language-python">def func(a1):   
    print(a1) </code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Base:

    def func(self, a1):
        print(a1)


f1 &#x3D; Base()
f1.func(2)</code></pre>


</li>
<li><p>面向对象中的self指的是什么?</p>
<p>答：指由类创建出来的对象如 obj &#x3D; Base(), self &#x3D; obj</p>
<p><font color="#dd0000">存在问题：知识点未掌握</font></p>
<p>答案：self是一个参数，当使用 对象.方法 的方式执行函数时，python自动传递self参数（参数的值为调用当前方法的对象）</p>
</li>
<li><p>以下代码体现 向对象的什么特性?</p>
<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    def __init__(self, name, age, gender):
        self.name &#x3D; name
        self.age &#x3D; age
        self.gender &#x3D; gender


obj &#x3D; Person(&#39;武沛齐&#39;, 18, &#39;男&#39;)</code></pre>

<p>答：封装性（封装了对象的属性）</p>
</li>
<li><p>以下代码体现 向对象的 么特点?</p>
<pre class="language-python" data-language="python"><code class="language-python">class Message(object):
    def email(self):
        &quot;&quot;&quot;
        发送邮件
        :return:
        &quot;&quot;&quot;
        pass

    def msg(self):
        &quot;&quot;&quot;
        发送短信
        :return:
        &quot;&quot;&quot;
        pass

    def wechat(self):
        &quot;&quot;&quot;
        发送微信
        :return:
        &quot;&quot;&quot;
        pass</code></pre>

<p>答：封装性（将共有的功能封装到Message类中）</p>
</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo:
    def func(self):
        print(&#39;foo.func&#39;)
        
obj &#x3D; Foo()
result &#x3D; obj.func()
print(result)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; foo.func
&gt;&gt;&gt; None</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Base1:
    def f1(self):
        print(&#39;base1.f1&#39;)

    def f2(self):
        print(&#39;base1.f2&#39;)

    def f3(self):
        print(&#39;base1.f3&#39;)
        self.f1()


class Base2:
    def f1(self):
        print(&#39;base2.f1&#39;)


class Foo(Base1, Base2):
    def f0(self):
        print(&#39;foo.f0&#39;)
        self.f3()


obj &#x3D; Foo()
obj.f0()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; foo.f0
&gt;&gt;&gt; base1.f3
&gt;&gt;&gt; base1.f1</code></pre>


</li>
<li><p>看代码写结果:</p>
<pre class="language-python" data-language="python"><code class="language-python">class Base:
    def f1(self):
        print(&#39;base.f1&#39;)

    def f3(self):
        self.f1()
        print(&#39;base.f3&#39;)


class Foo(Base):
    def f1(self):
        print(&#39;foo.f1&#39;)

    def f2(self):
        print(&#39;foo.f2&#39;)
        self.f3()


obj &#x3D; Foo()
obj.f2()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; foo.f2
&gt;&gt;&gt; foo.f1
&gt;&gt;&gt; base.f3</code></pre>


</li>
<li><p>补充代码实现</p>
<pre class="language-python" data-language="python"><code class="language-python">user_list &#x3D; []
while True:
    user &#x3D; input(&quot;请输入用户名:&quot;)
    pwd &#x3D; input(&quot;请输入密码:&quot;)
    email &#x3D; input(&quot;请输入邮箱:&quot;)
    
&quot;&quot;&quot;
# 需求
1. while循环提示 户输 : 户名、密码、邮箱(正则满足邮箱格式)
2. 为每个用户创建一个个对象，并添加到user_list中。
3. 当列表中的添加 3个对象后，跳出循环并以此循环打印所有用户的姓名和邮箱
&quot;&quot;&quot;</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">import re

class User:
    def __init__(self, user, pwd, email):
        self.user &#x3D; user
        self.pwd &#x3D; pwd
        self.email &#x3D; email


user_list &#x3D; []
while True:
    user &#x3D; input(&quot;请输入用户名(输入Q&#x2F;q退出):&quot;).strip()
    if user.upper() &#x3D;&#x3D; &#39;Q&#39;:
        break

    pwd &#x3D; input(&quot;请输入密码:&quot;).strip()

    email &#x3D; input(&quot;请输入邮箱:&quot;).strip()
    email &#x3D; re.match(&#39;\w+@\w+\.\w+&#39;, email).group()
    if not email:
        print(&#39;输入格式错误&#39;)
        break

    u1 &#x3D; User(user, pwd, email)
    user_list.append(u1)

    if len(user_list) &#x3D;&#x3D; 3:
        for user in user_list:
            message &#x3D; &#39;用户&#123;&#125;您的邮箱为&#123;&#125;&#39;.format(user.user, user.email)
            print(message)</code></pre>

<p><font color="#dd0000">存在问题：</font></p>
<ul>
<li><p>用户邮箱格式错误后应该使用continue而不是break</p>
</li>
<li><p>将user_list &#x3D; []和后面内容封装到函数中</p>
</li>
<li><p>如果列表长度大于3先break掉在打印</p>
<p>if len(user_list) &#x3D;&#x3D; 3:<br>    for user in user_list:</p>
</li>
</ul>
</li>
<li><p>补充代码:实现 户注册和登录。</p>
<pre class="language-python" data-language="python"><code class="language-python">class User:
    def __init__(self, name, pwd):
        self.name &#x3D; name
        self.pwd &#x3D; pwd


class Account:
    def __init__(self):
        # 用户列表，数据格式：[user对象，user对象，user对象]
        self.user_list &#x3D; []

    def login(self):
        &quot;&quot;&quot;
        用户登录，输入用户名和密码然后去self.user_list中校验用户合法性
        :return:
        &quot;&quot;&quot;
        pass

    def register(self):
        &quot;&quot;&quot;
        用户注册，没注册一个用户就创建一个user对象，然后添加到self.user_list中，表示注册成功。
        :return:
        &quot;&quot;&quot;
        pass

    def run(self):
        &quot;&quot;&quot;
        主程序
        :return:
        &quot;&quot;&quot;
        pass


if __name__ &#x3D;&#x3D; &#39;__main__&#39;:
    obj &#x3D; Account()
    obj.run()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">class User:
    def __init__(self, name, pwd):
        self.name &#x3D; name
        self.pwd &#x3D; pwd


class Account:
    def __init__(self):
        # 用户列表，数据格式：[user对象，user对象，user对象]
        self.user_list &#x3D; []

    def login(self):
        &quot;&quot;&quot;
        用户登录，输入用户名和密码然后去self.user_list中校验用户合法性
        :return:
        &quot;&quot;&quot;
        name &#x3D; input(&quot;请输入用户名: &quot;).strip()
        pwd &#x3D; input(&quot;请输入密码: &quot;).strip()

        for user in self.user_list:
            if name &#x3D;&#x3D; user.name and pwd &#x3D;&#x3D; user.pwd:
                print(&quot;登录成功&quot;)
                break
            else:
                if user &#x3D;&#x3D; self.user_list[-1]:
                    print(&#39;登录失败&#39;)



    def register(self):
        &quot;&quot;&quot;
        用户注册，每注册一个用户就创建一个user对象，然后添加到self.user_list中，表示注册成功。
        :return:
        &quot;&quot;&quot;
        name &#x3D; input(&quot;请输入用户名: &quot;).strip()
        pwd &#x3D; input(&quot;请输入密码: &quot;).strip()

        user &#x3D; User(name, pwd)
        self.user_list.append(user)
        print(&#39;恭喜&#123;&#125;注册成果，您的密码为&#123;&#125;&#39;.format(name, pwd))

    def run(self):
        &quot;&quot;&quot;
        主程序
        :return:
        &quot;&quot;&quot;
        while True:
            choice &#x3D; input(&#39;请选择功能(输入Q&#x2F;q退出)：1-注册，2-登录: &#39;)

            if choice.upper() &#x3D;&#x3D; &#39;Q&#39;:
                break
            if choice &#x3D;&#x3D; &#39;1&#39;:
                self.register()
            elif choice &#x3D;&#x3D; &#39;2&#39;:
                self.login()
            else:
                print(&#39;输入错误&#39;)


if __name__ &#x3D;&#x3D; &#39;__main__&#39;:
    obj &#x3D; Account()
    obj.run()</code></pre></li>
</ol>
<p><font color="#dd0000">存在问题：</font></p>
<ul>
<li><p>主函数中可以使用字典存储Account的两个功能</p>
<pre class="language-python" data-language="python"><code class="language-python">def run(self):
    &quot;&quot;&quot;
    主程序
    :return:
    &quot;&quot;&quot;
    while True:
        func_dic &#x3D; &#123;
            &#39;1&#39;: &#123;&#39;name&#39;: &#39;注册&#39;, &#39;func&#39;: self.register&#125;,
            &#39;2&#39;: &#123;&#39;name&#39;: &#39;登录&#39;, &#39;func&#39;: self.login&#125;
        &#125;
        # 打印提示信息
        msg &#x3D; &#39;;&#39;.join([&#39;&#123;&#125;-&#123;&#125;&#39;.format(k, v[&#39;name&#39;]) for k, v in func_dic.items()])
        print(msg)

        choice &#x3D; input(&#39;请输入所选功能(输入Q&#x2F;q退出)： &#39;)
        if choice.upper() &#x3D;&#x3D; &#39;Q&#39;:
            break
        info &#x3D; func_dic.get(choice)
        if not info:
            print(&#39;输入错误请重新输入&#39;)
            continue

        func &#x3D; info[&#39;func&#39;]
        func()</code></pre>
</li>
<li><p>注册时只能注册一次,且不能退出</p>
<pre class="language-python" data-language="python"><code class="language-python">def register(self):
    &quot;&quot;&quot;
    用户注册，每注册一个用户就创建一个user对象，然后添加到self.user_list中，表示注册成功。
    :return:
    &quot;&quot;&quot;
    print(&#39;用户注册&#39;)
    while True:
        name &#x3D; input(&quot;请输入用户名(输入Q&#x2F;q退出): &quot;).strip()
        if name.upper() &#x3D;&#x3D; &#39;Q&#39;:
            break
        pwd &#x3D; input(&quot;请输入密码: &quot;).strip()

        user_obj &#x3D; User(name, pwd)
        self.user_list.append(user_obj)</code></pre>
</li>
<li><p>登录时只能注册一次,且不能退出</p>
<pre class="language-python" data-language="python"><code class="language-python">def login(self):
    print(&#39;用户登录&#39;)
    &quot;&quot;&quot;
    用户登录，输入用户名和密码然后去self.user_list中校验用户合法性
    :return:
    &quot;&quot;&quot;
    while True:
        name &#x3D; input(&quot;请输入用户名(输入Q&#x2F;q退出): &quot;).strip()
        if name.upper() &#x3D;&#x3D; &#39;Q&#39;:
            break
        pwd &#x3D; input(&quot;请输入密码: &quot;).strip()

        for user in self.user_list:
            if name &#x3D;&#x3D; user.name and pwd &#x3D;&#x3D; user.pwd:
                print(&quot;登录成功&quot;)
                break
            else:
                if user &#x3D;&#x3D; self.user_list[-1]:
                    print(&#39;登录失败&#39;)</code></pre></li>
</ul>
<h1 id="十九、面向对象进阶"><a href="#十九、面向对象进阶" class="headerlink" title="十九、面向对象进阶"></a>十九、面向对象进阶</h1><img src="/2022/06/15/python-mo-kuai-san-day1/image-20210127104158850.png" class="">

<p>课程目标：掌握面向对象进阶相关知识点，能沟通更加自如的使用面向对象来进行编程。</p>
<p>今日概要：</p>
<ul>
<li><p>成员</p>
<ul>
<li>变量<ul>
<li>实例变量</li>
<li>类变量</li>
</ul>
</li>
<li>方法<ul>
<li>绑定方法</li>
<li>类方法</li>
<li>静态方法</li>
</ul>
</li>
<li>属性：使代码更加简洁</li>
</ul>
</li>
<li><p>成员修饰符（公有&#x2F;私有）</p>
</li>
<li><p>“对象嵌套”：一些项目源码中大量使用，方便读懂源码</p>
</li>
<li><p>特殊成员：一些项目源码中大量使用，方便读懂源码</p>
</li>
</ul>
<h2 id="1-成员"><a href="#1-成员" class="headerlink" title="1.成员"></a>1.成员</h2><p>面向对象中的所有成员如下：</p>
<ul>
<li>变量<ul>
<li>实例变量</li>
<li>类变量</li>
</ul>
</li>
<li>方法<ul>
<li>绑定方法</li>
<li>类方法</li>
<li>静态方法</li>
</ul>
</li>
<li>属性</li>
</ul>
<p>通过面向对象进行编程时，会遇到很多种情况，也会使用不同的成员来实现，接下来我们来逐一介绍成员特性和应用场景。</p>
<h3 id="1-1-变量"><a href="#1-1-变量" class="headerlink" title="1.1 变量"></a>1.1 变量</h3><ul>
<li>实例变量，属于对象，每个对象中各自维护自己的数据。</li>
<li>类变量，属于类，可以被所有对象共享，一般用于给对象提供公共数据（类似于全局变量）。</li>
</ul>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210127111042911.png" class="">



<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    country &#x3D; &quot;中国&quot;

    def __init__(self, name, age):
        self.name &#x3D; name
        self.age &#x3D; age

    def show(self):
        # 推荐
        message &#x3D; &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(Person.country, self.name, self.age)
        # message &#x3D; &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(self.country, self.name, self.age)
        print(message)

print(Person.country) # 中国


p1 &#x3D; Person(&quot;武沛齐&quot;,20)
print(p1.name)
print(p1.age)
print(p1.country) # 中国

p1.show() # 中国-武沛齐-20


</code></pre>

<p><strong>提示：当把每个对象中都存在的相同的示例变量时，可以选择把它放在类变量中，这样就可以避免对象中维护多个相同数据。</strong></p>
<h4 id="易错点-amp-面试题"><a href="#易错点-amp-面试题" class="headerlink" title="易错点 &amp; 面试题"></a><font color="#dd0000">易错点 &amp; 面试题</font></h4><p>第一题：注意读和写的区别。</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210127111042911.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    country &#x3D; &quot;中国&quot;

    def __init__(self, name, age):
        self.name &#x3D; name
        self.age &#x3D; age

    def show(self):
        message &#x3D; &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(self.country, self.name, self.age)
        print(message)

print(Person.country) # 中国

p1 &#x3D; Person(&quot;武沛齐&quot;,20)
print(p1.name) # 武沛齐
print(p1.age) # 20
print(p1.country) # 中国
p1.show() # 中国-武沛齐-20

p1.name &#x3D; &quot;root&quot;     # 在对象p1中将name重置为root
p1.num &#x3D; 19          # 在对象p1中新增实例变量 num&#x3D;19
p1.country &#x3D; &quot;china&quot; # 在对象p1中新增实例变量 country&#x3D;&quot;china&quot;

print(p1.country)   # china
print(Person.country) # 中国</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    country &#x3D; &quot;中国&quot;

    def __init__(self, name, age):
        self.name &#x3D; name
        self.age &#x3D; age

    def show(self):
        message &#x3D; &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(self.country, self.name, self.age)
        print(message)

print(Person.country) # 中国

Person.country &#x3D; &quot;美国&quot;


p1 &#x3D; Person(&quot;武沛齐&quot;,20)
print(p1.name) # 武沛齐
print(p1.age) # 20
print(p1.country) # 美国</code></pre>





<p>第二题：继承关系中的读写</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210127124925846.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">class Base(object):
    country &#x3D; &quot;中国&quot;


class Person(Base):

    def __init__(self, name, age):
        self.name &#x3D; name
        self.age &#x3D; age

    def show(self):
        message &#x3D; &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(Person.country, self.name, self.age)
        # message &#x3D; &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(self.country, self.name, self.age)
        print(message)


# 读
print(Base.country) # 中国
print(Person.country) # 中国

obj &#x3D; Person(&quot;武沛齐&quot;,19)
print(obj.country) # 中国

# 写
Base.country &#x3D; &quot;china&quot;
Person.country &#x3D; &quot;泰国&quot;
obj.country &#x3D; &quot;日本&quot;</code></pre>

<h4 id="【面试题】：类变量和实例变量的读写"><a href="#【面试题】：类变量和实例变量的读写" class="headerlink" title="【面试题】：类变量和实例变量的读写"></a><font color="#dd0000">【面试题】</font>：类变量和实例变量的读写</h4><pre class="language-python" data-language="python"><code class="language-python">class Parent(object):
    x &#x3D; 1


class Child1(Parent):
    pass


class Child2(Parent):
    pass


print(Parent.x, Child1.x, Child2.x) # 1 1 1

Child1.x &#x3D; 2
print(Parent.x, Child1.x, Child2.x) # 1 2 1

Parent.x &#x3D; 3
print(Parent.x, Child1.x, Child2.x) # 3 2 3</code></pre>



<h3 id="1-2-方法"><a href="#1-2-方法" class="headerlink" title="1.2 方法"></a>1.2 方法</h3><ul>
<li>绑定方法，默认有一个self参数，由对象进行调用（此时self就等于调用方法的这个对象）【对象&amp;类均可调用】</li>
<li>类方法，默认有一个cls参数，用类或对象都可以调用（此时cls就等于调用方法的这个类）【对象&amp;类均可调用】</li>
<li>静态方法，无默认参数，用类和对象都可以调用。【对象&amp;类均可调用】</li>
</ul>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210127141701335.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self, name,age):
        self.name &#x3D; name
        self.age &#x3D; age

    def f1(self):
        print(&quot;绑定方法&quot;, self.name)

    @classmethod
    def f2(cls):
        print(&quot;类方法&quot;, cls)

    @staticmethod
    def f3():
        print(&quot;静态方法&quot;)
        
# 绑定方法：主要做法是通过对象调用
obj &#x3D; Foo(&quot;武沛齐&quot;,20)
obj.f1() 
Foo.f1(obj)

# 类方法：主流做法是通过类进行调用
Foo.f2()  # cls就是当前调用这个方法的类。（类）
obj.f2()  # cls就是当前调用这个方法的对象的类。


# 静态方法：主流做法是通过类进行调用
Foo.f3()  # 类执行执行方法（类）
obj.f3()  # 对象执行执行方法</code></pre>

<p>在Python中比较灵活，方法都可以通过对象和类进行调用；而在java、c#等语言中，绑定方法只能由对象调用；类方法或静态方法只能由类调用。</p>
<pre class="language-python" data-language="python"><code class="language-python">import os
import requests


class Download(object):

    def __init__(self, folder_path):
        self.folder_path &#x3D; folder_path

    @staticmethod
    def download_dou_yin():
        # 下载抖音
        res &#x3D; requests.get(&#39;.....&#39;)

        with open(&quot;xxx.mp4&quot;, mode&#x3D;&#39;wb&#39;) as f:
            f.write(res.content)

    def download_dou_yin_2(self):
        # 下载抖音
        res &#x3D; requests.get(&#39;.....&#39;)
        path &#x3D; os.path.join(self.folder_path, &#39;xxx.mp4&#39;)
        with open(path, mode&#x3D;&#39;wb&#39;) as f:
            f.write(res.content)


obj &#x3D; Download(&quot;video&quot;)
obj.download_dou_yin()
</code></pre>

<h4 id="【面试题】：在类中-classmethod-和-staticmethod-的作用？"><a href="#【面试题】：在类中-classmethod-和-staticmethod-的作用？" class="headerlink" title="【面试题】：在类中 @classmethod 和 @staticmethod 的作用？"></a><font color="#dd0000">【面试题】</font>：在类中 <code>@classmethod</code> 和 <code>@staticmethod</code> 的作用？</h4><blockquote>
<p>在类中，方法装饰上@classmethod和@staticmethod后，该方法变为类方法或静态方法。</p>
<ul>
<li>在类方法中需要传入cls参数，以调用类中的变量和方法</li>
<li>在静态方法中不用传入任何参数</li>
</ul>
</blockquote>
<h3 id="1-3-属性"><a href="#1-3-属性" class="headerlink" title="1.3 属性"></a>1.3 属性</h3><p>属性其实是由绑定方法 + 特殊装饰器（<code>@property</code>） 组合创造出来的，<strong>让我们以后在调用方法时可以不加括号</strong>，例如：</p>
<p>在自己写代码的过程中应用较少，学习后主要应用场景为<strong>更好的阅读别人的源码</strong></p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self, name):
        self.name &#x3D; name

    def f1(self):
        return 123

    @property
    def f2(self):
        return 123


obj &#x3D; Foo(&quot;武沛齐&quot;)

v1 &#x3D; obj.f1()
print(v1)

v2 &#x3D; obj.f2
print(v2)</code></pre>



<p>示例：以之前开发的分页的功能。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Pagination:
    def __init__(self, current_page, per_page_num&#x3D;10):
        self.per_page_num &#x3D; per_page_num
        
        if not current_page.isdecimal():
            self.current_page &#x3D; 1
            return
        current_page &#x3D; int(current_page)
        if current_page &lt; 1:
            self.current_page &#x3D; 1
            return
        self.current_page &#x3D; current_page
	
    def start(self):
        return (self.current_page - 1) * self.per_page_num
	
    def end(self):
        return self.current_page * self.per_page_num


user_list &#x3D; [&quot;用户-&#123;&#125;&quot;.format(i) for i in range(1, 3000)]

# 分页显示，每页显示10条
while True:
    page &#x3D; input(&quot;请输入页码：&quot;)
	
    # page，当前访问的页码
    # 10，每页显示10条数据
	# 内部执行Pagination类的init方法。
    pg_object &#x3D; Pagination(page, 20)
    
    page_data_list &#x3D; user_list[ pg_object.start() : pg_object.end() ]
    for item in page_data_list:
        print(item)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Pagination:
    def __init__(self, current_page, per_page_num&#x3D;10):
        self.per_page_num &#x3D; per_page_num

        if not current_page.isdecimal():
            self.current_page &#x3D; 1
            return
        current_page &#x3D; int(current_page)
        if current_page &lt; 1:
            self.current_page &#x3D; 1
            return
        self.current_page &#x3D; current_page

    @property
    def start(self):
        return (self.current_page - 1) * self.per_page_num

    @property
    def end(self):
        return self.current_page * self.per_page_num


user_list &#x3D; [&quot;用户-&#123;&#125;&quot;.format(i) for i in range(1, 3000)]

# 分页显示，每页显示10条
while True:
    page &#x3D; input(&quot;请输入页码：&quot;)

    pg_object &#x3D; Pagination(page, 20)
    page_data_list &#x3D; user_list[ pg_object.start : pg_object.end ]
    
    for item in page_data_list:
        print(item)</code></pre>



<p>其实，除了咱们写的示例以外，在很多模块和框架的源码中也有porperty的身影，例如：requests模块。</p>
<pre class="language-python" data-language="python"><code class="language-python">import requests

# 内部下载视频，并将下载好的数据分装到Response对象中。
res &#x3D; requests.get(
    url&#x3D;&quot;https:&#x2F;&#x2F;aweme.snssdk.com&#x2F;aweme&#x2F;v1&#x2F;playwm&#x2F;?video_id&#x3D;v0200f240000buuer5aa4tij4gv6ajqg&quot;,
    headers&#x3D;&#123;
        &quot;user-agent&quot;: &quot;Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;87.0.4280.88 Safari&#x2F;537.36 FS&quot;
    &#125;
)

# 去对象中获取text，其实需要读取原始文本字节并转换为字符串
res.text</code></pre>



<p>关于属性的编写有两种方式：</p>
<ul>
<li><p>方式一，基于装饰器</p>
<pre class="language-python" data-language="python"><code class="language-python">class C(object):
    
    @property
    def x(self):
        pass
    
    @x.setter
    def x(self, value):
        pass
    
    @x.deleter
    def x(self):
		pass
        
obj &#x3D; C()

obj.x
obj.x &#x3D; 123
del obj.x</code></pre>
</li>
<li><p>方式二，基于定义变量</p>
<pre class="language-python" data-language="python"><code class="language-python">class C(object):
    
    def getx(self): 
		pass
    
    def setx(self, value): 
		pass
        
    def delx(self): 
		pass
        
    x &#x3D; property(getx, setx, delx, &quot;I&#39;m the &#39;x&#39; property.&quot;)
    
obj &#x3D; C()

obj.x
obj.x &#x3D; 123
del obj.x</code></pre></li>
</ul>
<p>Django源码一撇：</p>
<pre class="language-python" data-language="python"><code class="language-python">class WSGIRequest(HttpRequest):
    def __init__(self, environ):
        script_name &#x3D; get_script_name(environ)
        # If PATH_INFO is empty (e.g. accessing the SCRIPT_NAME URL without a
        # trailing slash), operate as if &#39;&#x2F;&#39; was requested.
        path_info &#x3D; get_path_info(environ) or &#39;&#x2F;&#39;
        self.environ &#x3D; environ
        self.path_info &#x3D; path_info
        # be careful to only replace the first slash in the path because of
        # http:&#x2F;&#x2F;test&#x2F;something and http:&#x2F;&#x2F;test&#x2F;&#x2F;something being different as
        # stated in https:&#x2F;&#x2F;www.ietf.org&#x2F;rfc&#x2F;rfc2396.txt
        self.path &#x3D; &#39;%s&#x2F;%s&#39; % (script_name.rstrip(&#39;&#x2F;&#39;),
                               path_info.replace(&#39;&#x2F;&#39;, &#39;&#39;, 1))
        self.META &#x3D; environ
        self.META[&#39;PATH_INFO&#39;] &#x3D; path_info
        self.META[&#39;SCRIPT_NAME&#39;] &#x3D; script_name
        self.method &#x3D; environ[&#39;REQUEST_METHOD&#39;].upper()
        # Set content_type, content_params, and encoding.
        self._set_content_type_params(environ)
        try:
            content_length &#x3D; int(environ.get(&#39;CONTENT_LENGTH&#39;))
        except (ValueError, TypeError):
            content_length &#x3D; 0
        self._stream &#x3D; LimitedStream(self.environ[&#39;wsgi.input&#39;], content_length)
        self._read_started &#x3D; False
        self.resolver_match &#x3D; None

    def _get_scheme(self):
        return self.environ.get(&#39;wsgi.url_scheme&#39;)

    def _get_post(self):
        if not hasattr(self, &#39;_post&#39;):
            self._load_post_and_files()
        return self._post

    def _set_post(self, post):
        self._post &#x3D; post

    @property
    def FILES(self):
        if not hasattr(self, &#39;_files&#39;):
            self._load_post_and_files()
        return self._files

    POST &#x3D; property(_get_post, _set_post)</code></pre>



<p>写在最后，对属性进行一个补充：</p>
<p>由于属性和实例变量的调用方式相同，所以在编写时需要注意：属性名称 不要 实例变量 重名。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self, name, age):
        self.name &#x3D; name
        self.age &#x3D; age

    @property
    def func(self):
        return 123


obj &#x3D; Foo(&quot;武沛齐&quot;, 123)
print(obj.name)
print(obj.func)</code></pre>



<p>一旦重名，可能就会有报错。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self, name, age):
        self.name &#x3D; name  # 报错，错认为你想要调用 @name.setter 装饰的方法。
        self.age &#x3D; age

    @property
    def name(self):
        return &quot;&#123;&#125;-&#123;&#125;&quot;.format(self.name, self.age)


obj &#x3D; Foo(&quot;武沛齐&quot;, 123)</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self, name, age):
        self.name &#x3D; name 
        self.age &#x3D; age

    @property
    def name(self):
        return &quot;&#123;&#125;-&#123;&#125;&quot;.format(self.name, self.age) # 报错，循环调用自己（直到层级太深报错）

    @name.setter
    def name(self, value):
        print(value)


obj &#x3D; Foo(&quot;武沛齐&quot;, 123)
print(obj.name)</code></pre>



<p>如果真的想要在名称上创建一些关系，可以让实例变量加上一个下划线。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self, name, age):
        self._name &#x3D; name
        self.age &#x3D; age

    @property
    def name(self):
        return &quot;&#123;&#125;-&#123;&#125;&quot;.format(self._name, self.age)


obj &#x3D; Foo(&quot;武沛齐&quot;, 123)
print(obj._name)
print(obj.name)</code></pre>



<h2 id="2-成员修饰符"><a href="#2-成员修饰符" class="headerlink" title="2.成员修饰符"></a>2.成员修饰符</h2><p>Python中成员的修饰符就是指的是：公有、私有。</p>
<ul>
<li>公有，在任何地方都可以调用这个成员。</li>
<li>私有，只有在类的内部才可以调用改成员（成员是以两个下划线开头，则表示该成员为私有）。</li>
</ul>
<p>示例一：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self, name, age):
        self.__name &#x3D; name
        self.age &#x3D; age

    def get_data(self):
        return self.__name

    def get_age(self):
        return self.age


obj &#x3D; Foo(&quot;武沛齐&quot;, 123)


# 公有成员
print(obj.age)
v1 &#x3D; self.get_age()
print(v1)

# 私有成员
# print(obj.__name) # 错误，由于是私有成员，只能在类中进行使用。
v2 &#x3D; obj.get_data()
print(v2)</code></pre>



<p>示例2：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def get_age(self):
        print(&quot;公有的get_age&quot;)

    def __get_data(self):
        print(&quot;私有的__get_data方法&quot;)

    def proxy(self):
        print(&quot;公有的proxy&quot;)
        self.__get_data()


obj &#x3D; Foo()
obj.get_age()

obj.proxy()</code></pre>



<p>示例3：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    @property
    def __name(self):
        print(&quot;公有的get_age&quot;)

    @property
    def proxy(self):
        print(&quot;公有的proxy&quot;)
        self.__name
        return 1


obj &#x3D; Foo()
v1 &#x3D; obj.proxy
print(v1)
</code></pre>



<p>特别提醒：父类中的私有成员，子类无法继承。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Base(object):

    def __data(self):
        print(&quot;base.__data&quot;)

    def num(self):
        print(&quot;base.num&quot;)


class Foo(Base):

    def func(self):
        self.num()
        self.__data() # # 不允许执行父类中的私有方法


obj &#x3D; Foo()
obj.func()
</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Base(object):

    def __data(self):
        print(&quot;base.__data&quot;)

    def num(self):
        print(&quot;base.num&quot;)
        self.__data()  # 不允许执行父类中的私有方法


class Foo(Base):

    def func(self):
        self.num()


obj &#x3D; Foo()
obj.func()</code></pre>





<p>写在最后，按理说私有成员是无法被外部调用，但如果用一些特殊的语法也可以（Flask源码中有这种写法，大家写代码不推荐这样写）。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self):
        self.__num &#x3D; 123
        self.age &#x3D; 19

    def __msg(self):
        print(1234)


obj &#x3D; Foo()
print(obj.age)
print(obj._Foo__num)
obj._Foo__msg()</code></pre>



<p><strong>成员是否可以作为独立的功能暴露给外部，让外部调用并使用。</strong></p>
<ul>
<li>可以，公有。</li>
<li>不可以，内部其他放的一个辅助，私有。</li>
</ul>
<h2 id="3-对象嵌套"><a href="#3-对象嵌套" class="headerlink" title="3.对象嵌套"></a>3.对象嵌套</h2><p>在基于面向对象进行编程时，对象之间可以存在各种各样的关系，例如：组合、关联、依赖等（Java中的称呼），用大白话来说就是各种嵌套。</p>
<p>下面我们就用示例来学习常见的嵌套的情景：</p>
<p>情景一：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Student(object):
    &quot;&quot;&quot; 学生类 &quot;&quot;&quot;

    def __init__(self, name, age):
        self.name &#x3D; name
        self.age &#x3D; age

    def message(self):
        data &#x3D; &quot;我是一名学生，我叫:&#123;&#125;,我今年&#123;&#125;岁&quot;.format(self.name, self.age)
        print(data)

s1 &#x3D; Student(&quot;武沛齐&quot;, 19)
s2 &#x3D; Student(&quot;Alex&quot;, 19)
s3 &#x3D; Student(&quot;日天&quot;, 19)



class Classes(object):
    &quot;&quot;&quot; 班级类 &quot;&quot;&quot;

    def __init__(self, title):
        self.title &#x3D; title
        self.student_list &#x3D; []

    def add_student(self, stu_object):
        self.student_list.append(stu_object)

    def add_students(self, stu_object_list):
        for stu in stu_object_list:
            self.add_student(stu)

    def show_members(self):
        for item in self.student_list:
            # print(item)
            item.message()

c1 &#x3D; Classes(&quot;三年二班&quot;)
c1.add_student(s1)
c1.add_students([s2, s3])

print(c1.title)
print(c1.student_list)</code></pre>



<p>情景二：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Student(object):
    &quot;&quot;&quot; 学生类 &quot;&quot;&quot;

    def __init__(self, name, age, class_object):
        self.name &#x3D; name
        self.age &#x3D; age
        self.class_object &#x3D; class_object

    def message(self):
        data &#x3D; &quot;我是一名&#123;&#125;班的学生，我叫:&#123;&#125;,我今年&#123;&#125;岁&quot;.format(self.class_object.title, self.name, self.age)
        print(data)


class Classes(object):
    &quot;&quot;&quot; 班级类 &quot;&quot;&quot;

    def __init__(self, title):
        self.title &#x3D; title


c1 &#x3D; Classes(&quot;Python全栈&quot;)
c2 &#x3D; Classes(&quot;Linux云计算&quot;)

user_object_list &#x3D; [
    Student(&quot;武沛齐&quot;, 19, c1),
    Student(&quot;Alex&quot;, 19, c1),
    Student(&quot;日天&quot;, 19, c2)
]

for obj in user_object_list:
    print(obj.name,obj.age, obj.class_object.title)
</code></pre>

<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210127215951115.png" class="">





<p>情景三：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Student(object):
    &quot;&quot;&quot; 学生类 &quot;&quot;&quot;

    def __init__(self, name, age, class_object):
        self.name &#x3D; name
        self.age &#x3D; age
        self.class_object &#x3D; class_object

    def message(self):
        data &#x3D; &quot;我是一名&#123;&#125;班的学生，我叫:&#123;&#125;,我今年&#123;&#125;岁&quot;.format(self.class_object.title, self.name, self.age)
        print(data)


class Classes(object):
    &quot;&quot;&quot; 班级类 &quot;&quot;&quot;

    def __init__(self, title, school_object):
        self.title &#x3D; title
        self.school_object &#x3D; school_object


class School(object):
    &quot;&quot;&quot; 学校类 &quot;&quot;&quot;

    def __init__(self, name):
        self.name &#x3D; name


s1 &#x3D; School(&quot;北京校区&quot;)
s2 &#x3D; School(&quot;上海校区&quot;)

c1 &#x3D; Classes(&quot;Python全栈&quot;, s1)
c2 &#x3D; Classes(&quot;Linux云计算&quot;, s2)

user_object_list &#x3D; [
    Student(&quot;武沛齐&quot;, 19, c1),
    Student(&quot;Alex&quot;, 19, c1),
    Student(&quot;日天&quot;, 19, c2)
]
for obj in user_object_list:
    print(obj.name, obj.class_object.title ,  obj.class_object.school_object.name)
</code></pre>



<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210127220654414.png" class="">





<h2 id="4-特殊成员"><a href="#4-特殊成员" class="headerlink" title="4.特殊成员"></a>4.特殊成员</h2><p>在Python的类中存在一些特殊的方法，这些方法都是 <code>__方法__</code> 格式，这种方法在内部均有特殊的含义，接下来我们来讲一些常见的特殊成员：</p>
<ul>
<li><p><code>__init__</code>，初始化方法</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __init__(self, name):
        self.name &#x3D; name


obj &#x3D; Foo(&quot;武沛齐&quot;)</code></pre>
</li>
<li><p><code>__new__</code>，构造方法</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __init__(self, name):
        print(&quot;第二步：初始化对象，在空对象中创建数据&quot;)
        self.name &#x3D; name

    def __new__(cls, *args, **kwargs):
        print(&quot;第一步：先创建空对象并返回&quot;)
        return object.__new__(cls)


obj &#x3D; Foo(&quot;武沛齐&quot;)</code></pre>
</li>
<li><p><code>__call__</code></p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __call__(self, *args, **kwargs):
        print(&quot;执行call方法&quot;)


obj &#x3D; Foo()
obj()</code></pre>
</li>
<li><p><code>__str__</code></p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __str__(self):
        return &quot;哈哈哈哈&quot;


obj &#x3D; Foo()
data &#x3D; str(obj)
print(data)</code></pre>
</li>
<li><p><code>__dict__</code></p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __init__(self, name, age):
        self.name &#x3D; name
        self.age &#x3D; age


obj &#x3D; Foo(&quot;武沛齐&quot;,19)
print(obj.__dict__)</code></pre>
</li>
<li><p><code>__getitem__</code>、<code>__setitem__</code>、<code>__delitem__</code></p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __getitem__(self, item):
        pass

    def __setitem__(self, key, value):
        pass

    def __delitem__(self, key):
        pass


obj &#x3D; Foo(&quot;武沛齐&quot;, 19)

obj[&quot;x1&quot;]
obj[&#39;x2&#39;] &#x3D; 123
del obj[&#39;x3&#39;]</code></pre>
</li>
<li><p><code>__enter__</code>、<code>__exit__</code></p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __enter__(self):
        print(&quot;进入了&quot;)
        return 666

    def __exit__(self, exc_type, exc_val, exc_tb):
        print(&quot;出去了&quot;)


obj &#x3D; Foo()
# with obj as data：执行__enter__方法并将返回值传给data
# 当with缩进内的代码执行完毕后，自动执行__exit__
with obj as data: 
    print(data)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">超前知识：数据连接，每次对远程的数据进行操作时候都必须经历。
1.连接 &#x3D; 连接数据库
2.操作数据库
3.关闭连接</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class SqlHelper(object):

    def __enter__(self):
        self.连接 &#x3D; 连接数据库
        return 连接

    def __exit__(self, exc_type, exc_val, exc_tb):
        self.连接.关闭

        
        
with SqlHelper() as 连接:
    连接.操作..
    
    
with SqlHelper() as 连接:
    连接.操作...</code></pre>

<h4 id="【面试题】：-enter-和-exit"><a href="#【面试题】：-enter-和-exit" class="headerlink" title="【面试题】：__enter__和__exit__"></a><font color="#dd0000">【面试题】</font>：<code>__enter__</code>和<code>__exit__</code></h4><pre class="language-python" data-language="python"><code class="language-python"># （补充代码，实现如下功能）

class Context:
    
    def do_something(self):
        print(&#39;内部执行&#39;)


with Context() as ctx:
    print(&#39;内部执行&#39;)
    ctx.do_something()
</code></pre>

<p>上下文管理的语法。</p>
</li>
<li><p><code>__add__</code> 等。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __init__(self, name):
        self.name &#x3D; name

    def __add__(self, other):
        return &quot;&#123;&#125;-&#123;&#125;&quot;.format(self.name, other.name)


v1 &#x3D; Foo(&quot;alex&quot;)
v2 &#x3D; Foo(&quot;sb&quot;)

# 对象+值，内部会去执行 对象.__add__方法，并将+后面的值当做参数传递过去。
v3 &#x3D; v1 + v2
print(v3)</code></pre>
</li>
<li><p><code>__iter__</code></p>
<ul>
<li><p>迭代器</p>
<pre class="language-python" data-language="python"><code class="language-python"># 迭代器类型的定义：
    1.当类中定义了 __iter__ 和 __next__ 两个方法。
    2.__iter__ 方法需要返回对象本身，即：self
    3. __next__ 方法，返回下一个数据，如果没有数据了，则需要抛出一个StopIteration的异常。
	官方文档：https:&#x2F;&#x2F;docs.python.org&#x2F;3&#x2F;library&#x2F;stdtypes.html#iterator-types
        
# 创建 迭代器类型 ：
	class IT(object):
        def __init__(self):
            self.counter &#x3D; 0

        def __iter__(self):
            return self

        def __next__(self):
            self.counter +&#x3D; 1
            if self.counter &#x3D;&#x3D; 3:
                raise StopIteration()
            return self.counter

# 根据类实例化创建一个迭代器对象：
    obj1 &#x3D; IT()
    
    # v1 &#x3D; obj1.__next__()
    # v2 &#x3D; obj1.__next__()
    # v3 &#x3D; obj1.__next__() # 抛出异常
    
    v1 &#x3D; next(obj1) # obj1.__next__()
    print(v1)

    v2 &#x3D; next(obj1)
    print(v2)

    v3 &#x3D; next(obj1)
    print(v3)


    obj2 &#x3D; IT()
    for item in obj2:  # 首先会执行迭代器对象的__iter__方法并获取返回值，一直去反复的执行 next(对象) 
        print(item)
        
迭代器对象支持通过next取值，如果取值结束则自动抛出StopIteration。
for循环内部在循环时，先执行__iter__方法，获取一个迭代器对象，然后不断执行的next取值（有异常StopIteration则终止循环）。</code></pre>
</li>
<li><p>生成器</p>
<pre class="language-python" data-language="python"><code class="language-python"># 创建生成器函数
    def func():
        yield 1
        yield 2
    
# 创建生成器对象（内部是根据生成器类generator创建的对象），生成器类的内部也声明了：__iter__、__next__ 方法。
    obj1 &#x3D; func()
    
    v1 &#x3D; next(obj1)
    print(v1)

    v2 &#x3D; next(obj1)
    print(v2)

    v3 &#x3D; next(obj1)
    print(v3)


    obj2 &#x3D; func()
    for item in obj2:
        print(item)

如果按照迭代器的规定来看，其实生成器类也是一种特殊的迭代器类（生成器也是一种特殊的迭代器）。</code></pre>
</li>
<li><p>可迭代对象</p>
<pre class="language-python" data-language="python"><code class="language-python"># 如果一个类中有__iter__方法且返回一个迭代器对象 ；则我们称以这个类创建的对象为可迭代对象。

class Foo(object):
    
    def __iter__(self):
        return 迭代器对象(生成器对象)
    
obj &#x3D; Foo() # obj是 可迭代对象。

# 可迭代对象是可以使用for来进行循环，在循环的内部其实是先执行 __iter__ 方法，获取其迭代器对象，然后再在内部执行这个迭代器对象的next功能，逐步取值。
for item in obj:
    pass</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class IT(object):
    def __init__(self):
        self.counter &#x3D; 0

    def __iter__(self):
        return self

    def __next__(self):
        self.counter +&#x3D; 1
        if self.counter &#x3D;&#x3D; 3:
            raise StopIteration()
        return self.counter


class Foo(object):
    def __iter__(self):
        return IT()


obj &#x3D; Foo() # 可迭代对象


for item in obj: # 循环可迭代对象时，内部先执行obj.__iter__并获取迭代器对象；不断地执行迭代器对象的next方法。
    print(item)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"># 基于可迭代对象&amp;迭代器实现：自定义range
class IterRange(object):
    def __init__(self, num):
        self.num &#x3D; num
        self.counter &#x3D; -1

    def __iter__(self):
        return self

    def __next__(self):
        self.counter +&#x3D; 1
        if self.counter &#x3D;&#x3D; self.num:
            raise StopIteration()
        return self.counter


class Xrange(object):
    def __init__(self, max_num):
        self.max_num &#x3D; max_num

    def __iter__(self):
        return IterRange(self.max_num)


obj &#x3D; Xrange(100)

for item in obj:
    print(item)</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __iter__(self):
        yield 1
        yield 2


obj &#x3D; Foo()
for item in obj:
    print(item)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"># 基于可迭代对象&amp;生成器 实现：自定义range

class Xrange(object):
    def __init__(self, max_num):
        self.max_num &#x3D; max_num

    def __iter__(self):
        counter &#x3D; 0
        while counter &lt; self.max_num:
            yield counter
            counter +&#x3D; 1


obj &#x3D; Xrange(100)
for item in obj:
    print(item)</code></pre>

<p>常见的数据类型：</p>
<pre class="language-python" data-language="python"><code class="language-python">v1 &#x3D; list([11,22,33,44])

v1是一个可迭代对象，因为在列表中声明了一个 __iter__ 方法并且返回一个迭代器对象。</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">from collections.abc import Iterator, Iterable

v1 &#x3D; [11, 22, 33]
print( isinstance(v1, Iterator) )  # false，判断是否是迭代器；判断依据是__iter__ 和 __next__。
v2 &#x3D; v1.__iter__()
print( isinstance(v2, Iterator) )  # True

v1 &#x3D; [11, 22, 33]
print( isinstance(v1, Iterable) )  # True，判断依据是是否有 __iter__且返回迭代器对象。

v2 &#x3D; v1.__iter__()
print( isinstance(v2, Iterable) )  # True，判断依据是是否有 __iter__且返回迭代器对象。</code></pre></li>
</ul>
</li>
</ul>
<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><ol>
<li><p>面向对象编程中的成员</p>
<ul>
<li>变量<ul>
<li>实例变量</li>
<li>类变量</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>方法<br>- 绑定方法<br>- 类方法<br>- 静态方法<ul>
<li>属性</li>
</ul>
</li>
</ul>
<ol start="2">
<li>成员修饰符</li>
<li>对象中的数据嵌套</li>
<li>特殊成员</li>
<li>重要概念：<ul>
<li>迭代器</li>
<li>生成器</li>
<li>可迭代对象</li>
</ul>
</li>
</ol>
<h2 id="作业-1"><a href="#作业-1" class="headerlink" title="作业"></a>作业</h2><ol>
<li><p>列举面向对象的成员并简述他们的特点。</p>
<p>答：</p>
<ul>
<li><p>变量</p>
<ul>
<li>实例变量：属于对象，只能被对象调用</li>
<li>类变量：属于类，既能被类调用，也能被实例调用</li>
</ul>
</li>
<li><p>方法</p>
<ul>
<li>绑定方法：既能被类调用，也能被实例调用，推荐使用对象进行调用，参数中需要传入 <code>self</code> 和 实例变量</li>
<li>类方法：既能被类调用，也能被实例调用，推荐使用类进行调用，参数中需要传入<code>cls</code>  和 类变量</li>
<li>静态方法：既能被类调用，也能被实例调用，推荐使用类进行调用，不用传入实例变量和类变量</li>
</ul>
</li>
<li><p>属性</p>
<p>通过绑定方法 + <code>@property</code> 组成，可以在执行该实例方法是不用加括号</p>
</li>
</ul>
<p><font color="#dd0000">存在问题</font>：</p>
<ul>
<li><code>self</code>、<code>cls</code>为默认参数不需要传递</li>
<li>未说明完全属性的作用</li>
</ul>
</li>
<li><p><code>@staticmethod</code> 和 <code>@classmethod</code>的作用是什么？</p>
<p>答：在绑定方法上装饰<code>@staticmethod</code> 或<code>@classmethod</code>，可以将该方法变为类方法或静态方法，具体视该方法有无调用实例变量和类变量而定。</p>
</li>
<li><p>面向对象中如何让成员变为私有。</p>
<p>答：在成员前加双下划线<code>__</code></p>
</li>
<li><p><code>__new__</code>方法的作用？</p>
<p>答：</p>
<p><font color="#dd0000">存在问题</font>：未掌握<code>__new__</code>用法</p>
</li>
<li><p>简述你理解的：迭代器、生成器、可迭代对象。</p>
<p>答：</p>
<ul>
<li>迭代器：内部封装有<code>__iter__</code>方法并返回对象本身，同时封装<code>__next__</code>方法</li>
<li>可迭代对象：内部封装有<code>__iter__</code>方法并返回一个迭代器</li>
<li>生成器：方法内包含<code>yield</code>关键字，同时满足迭代器的条件，是一种特殊的迭代器</li>
</ul>
<p><font color="#dd0000">存在问题</font>：</p>
<ul>
<li><p>缺少对<code>__next__</code>作用的介绍:<code>__next__</code>可以获取数据（终止抛出StopIteration异常），可以被for循环</p>
</li>
<li><p>生成器：函数中包含yield关键字，则被称为生成器函数，执行生成器函数获得一个生成器对象（特殊的迭代器），满足迭代器的条件。</p>
</li>
</ul>
</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    a1 &#x3D; 1
    
    def __init__(self,num):
        self.num &#x3D; num
        
    def show_data(self):
        print(self.num+self.a1)
    
obj1 &#x3D; Foo(666)
obj2 &#x3D; Foo(999)

print(obj1.num)
print(obj1.a1)

obj1.num &#x3D; 18
obj1.a1 &#x3D; 99

print(obj1.num)
print(obj1.a1)

print(obj2.a1)
print(obj2.num)
print(obj2.num)
print(Foo.a1)
print(obj1.a1)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 666
&gt;&gt;&gt; 1
&gt;&gt;&gt; 18
&gt;&gt;&gt; 99
&gt;&gt;&gt; 1
&gt;&gt;&gt; 999
&gt;&gt;&gt; 999
&gt;&gt;&gt; 1
&gt;&gt;&gt; 99</code></pre>


</li>
<li><p>看代码写结果，注意返回值。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    
    def f1(self):
        return 999
    
    def f2(self):
        v &#x3D; self.f1()
        print(&#39;f2&#39;)
        return v
    
    def f3(self):
        print(&#39;f3&#39;)
        return self.f2()
    
    def run(self):
        result &#x3D; self.f3()
        print(result)

obj &#x3D; Foo()
v1 &#x3D; obj.run()
print(v1)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; f3
&gt;&gt;&gt; f2
&gt;&gt;&gt; 999
&gt;&gt;&gt; None</code></pre>


</li>
<li><p>看代码写结果【如果有错误，则标注错误即可，并且假设程序报错可以继续执行】</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    
    def f1(self):
        print(&#39;f1&#39;)

    @staticmethod
    def f2():
        print(&#39;f2&#39;)
        
obj &#x3D; Foo()
obj.f1()
obj.f2()

Foo.f1()
Foo.f2()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; f1
&gt;&gt;&gt; f2
&gt;&gt;&gt; Foo.f1()  # 报错：未传入obj对象
&gt;&gt;&gt; f2</code></pre>


</li>
<li><p>看代码写结果【如果有错误，则标注错误即可，并且假设程序报错可以继续执行】</p>
<pre class="language-pthon" data-language="pthon"><code class="language-pthon">class Foo(object):
    
    def f1(self):
        print(&#39;f1&#39;)
        self.f2()
        self.f3()

    @classmethod
    def f2(cls):
          print(&#39;f2&#39;)

    @staticmethod
    def f3():
          print(&#39;f3&#39;)

obj &#x3D; Foo()
obj.f1()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; f1
&gt;&gt;&gt; f2
&gt;&gt;&gt; f3</code></pre>


</li>
<li><p>看代码写结果【如果有错误，则标注错误即可，并且假设程序报错可以继续执行】</p>
<pre class="language-python" data-language="python"><code class="language-python">class Base(object):
    @classmethod
    def f2(cls):
          print(&#39;f2&#39;)

    @staticmethod
    def f3():
          print(&#39;f3&#39;)

class Foo(Base):
    def f1(self):
        print(&#39;f1&#39;)
        self.f2()
        self.f3()

obj &#x3D; Foo()
obj.f1()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; f1
&gt;&gt;&gt; f2
&gt;&gt;&gt; f3</code></pre>


</li>
<li><p>看代码写结果【如果有错误，则标注错误即可，并且假设程序报错可以继续执行】</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    a1 &#x3D; 1
    __a2 &#x3D; 2
    
    def __init__(self,num):
        self.num &#x3D; num
        self.__salary &#x3D; 1000
        
     def show_data(self):
         print(self.num+self.a1)
    
obj &#x3D; Foo(666)

print(obj.num)
print(obj.a1)
print(obj.__salary)
print(obj.__a2)
print(Foo.a1)
print(Foo.__a2)
obj.show_data()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 666
&gt;&gt;&gt; 1
&gt;&gt;&gt; print(obj.__salary)  # 报错无法在类的外部访问私有变量
&gt;&gt;&gt; print(obj.__a2)  # 报错无法在类的外部访问私有变量
&gt;&gt;&gt; 1
&gt;&gt;&gt; print(Foo.__a2)  # 报错无法在类的外部访问私有变量
&gt;&gt;&gt; 667</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __init__(self, age):
        self.age &#x3D; age

    def display(self):
        print(self.age)


data_list &#x3D; [Foo(8), Foo(9)]
# print(data_list[0].age)
# data_list[1].display()

for item in data_list:
    print(item.age, item.display()) </code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 8
&gt;&gt;&gt; 9
&gt;&gt;&gt; 8
&gt;&gt;&gt; 8 None
&gt;&gt;&gt; 9
&gt;&gt;&gt; 9 None</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Base(object):
    def __init__(self, a1):
        self.a1 &#x3D; a1

    def f2(self, arg):
        print(self.a1, arg)


class Foo(Base):
    def f2(self, arg):
        print(&#39;666&#39;)


obj_list &#x3D; [Base(1), Foo(2), Foo(3)]

for item in obj_list:
    item.f2(1)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 1 1
&gt;&gt;&gt; 666
&gt;&gt;&gt; 666</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __init__(self, num):
        self.num &#x3D; num
        
v1 &#x3D; [Foo for i in range(10)]
v2 &#x3D; [Foo(5) for i in range(10)]
v3 &#x3D; [Foo(i) for i in range(10)]

print(v1)
print(v2)
print(v3)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; [class, class, ... , class]  # 10个类Foo
&gt;&gt;&gt; [Foo(5), Foo(5), ... , Foo(5)]  # 10个对象Foo(5)
&gt;&gt;&gt;	[Foo(0), Foo(1), ... , Foo(9)]  # 10个对象Foo(0)-Foo(9)</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class StarkConfig(object):

    def __init__(self, num):
        self.num &#x3D; num

    def changelist(self, request):
        print(self.num, request)


config_obj_list &#x3D; [ StarkConfig(1),  StarkConfig(2),  StarkConfig(3) ]
for item in config_obj_list:
    print(item.num)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 1
&gt;&gt;&gt; 2
&gt;&gt;&gt; 3</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class StarkConfig(object):

    def __init__(self, num):
        self.num &#x3D; num

    def changelist(self, request):
        print(self.num, request)


config_obj_list &#x3D; [StarkConfig(1), StarkConfig(2), StarkConfig(3)]
for item in config_obj_list:
    item.changelist(666)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 1 666
&gt;&gt;&gt; 2 666
&gt;&gt;&gt; 3 666</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class StarkConfig(object):

    def __init__(self, num):
        self.num &#x3D; num

    def changelist(self, request):
        print(self.num, request)

    def run(self):
        self.changelist(999)


class RoleConfig(StarkConfig):

    def changelist(self, request):
        print(666, self.num)


class AdminSite(object):
    def __init__(self):
        self._registry &#x3D; &#123;&#125;

    def register(self, k, v):
        self._registry[k] &#x3D; v


site &#x3D; AdminSite()

site.register(&#39;武沛齐&#39;, StarkConfig(19))
site.register(&#39;root&#39;, StarkConfig(20))
site.register(&quot;admin&quot;, RoleConfig(33))

print(len(site._registry))

for k, row in site._registry.items():
    row.changelist(5)
</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 3
&gt;&gt;&gt; 19 5
&gt;&gt;&gt; 20 5
&gt;&gt;&gt; 666 33</code></pre>


</li>
<li><p>看代码写结果（如有报错，请标注报错位置）</p>
<pre class="language-python" data-language="python"><code class="language-python">class StarkConfig(object):
    def __init__(self, num):
        self.num &#x3D; num
    def run(self):
        self()
    def __call__(self, *args, **kwargs):
        print(self.num)
        
class RoleConfig(StarkConfig):
    def __call__(self, *args, **kwargs):
        print(345)
    def __getitem__(self, item):
        return self.num[item]
    
v1 &#x3D; RoleConfig(&#39;alex&#39;)
v2 &#x3D; StarkConfig(&quot;wupeiqi&quot;)

print(v1[1])
print(v2[2])</code></pre>

<p>答：</p>
<p><font color="#dd0000">存在问题</font>：未掌握成员<code>__call__</code>和<code>__getitem__</code></p>
</li>
<li><p>补全代码</p>
<pre class="language-python" data-language="python"><code class="language-python">class Context:
	pass


with Context() as ctx:
    ctx.do_something()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Context:
    def __enter__(self):
        return self

    def do_something(self):
        pass

    def __exit__(self, exc_type, exc_val, exc_tb):
        pass


with Context() as ctx:
    ctx.do_something()</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Department(object):
    def __init__(self,title):
        self.title &#x3D; title

class Person(object):
    def __init__(self,name,age,depart):
        self.name &#x3D; name
        self.age &#x3D; age 
        self.depart &#x3D; depart
	
    def message(self):
        msg &#x3D; &quot;我是%s,年龄%s,属于%s&quot; %(self.name,self.age,self.depart.title)
        print(msg)
    
    
d1 &#x3D; Department(&#39;人事部&#39;)
d2 &#x3D; Department(&#39;销售部&#39;)

p1 &#x3D; Person(&#39;武沛齐&#39;,18,d1)
p2 &#x3D; Person(&#39;alex&#39;,18,d1)

p1.message()
p2.message()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 我是武沛齐,年龄18,属于人事部
&gt;&gt;&gt; 我是alex,年龄18,属于人事部</code></pre>


</li>
<li><p>分析代码关系，并写出正确的输出结果。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Node(object):
    def __init__(self, title):
        self.title &#x3D; title
        self.children &#x3D; []

    def add(self, node):
        self.children.append(node)

    def __getitem__(self, item):
        return self.children[item]


root &#x3D; Node(&quot;中国&quot;)

root.add(Node(&quot;河南省&quot;))
root.add(Node(&quot;河北省&quot;))

print(root.title)
print(root[0])
print(root[0].title)
print(root[1])
print(root[1].title)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 中国
&gt;&gt;&gt; 河南省
&gt;&gt;&gt; print(root[0].title)  # 报错河南省没有title
&gt;&gt;&gt; 河北省
&gt;&gt;&gt; print(root[1].title)  # 报错河北省没有title</code></pre>

<p><font color="#dd0000">存在问题</font>：</p>
<p><code>root.add(Node(&quot;河南省&quot;))</code>传入的是对象<code>Node(&quot;河南省&quot;)</code>而不是’河南省’字符串</p>
</li>
<li><p>分析代码关系，并写出正确的输出结果。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Node(object):
    def __init__(self, title):
        self.title &#x3D; title
        self.children &#x3D; []

    def add(self, node):
        self.children.append(node)

    def __getitem__(self, item):
        return self.children[item]


root &#x3D; Node(&quot;中国&quot;)

root.add(Node(&quot;河南省&quot;))
root.add(Node(&quot;河北省&quot;))
root.add(Node(&quot;陕西省&quot;))
root.add(Node(&quot;山东省&quot;))

root[1].add(Node(&quot;石家庄&quot;))
root[1].add(Node(&quot;保定&quot;))
root[1].add(Node(&quot;廊坊&quot;))

root[3].add(Node(&quot;潍坊&quot;))
root[3].add(Node(&quot;烟台&quot;))
root[3].add(Node(&quot;威海&quot;))

root[1][1].add(Node(&quot;雄安&quot;))
root[1][1].add(Node(&quot;望都&quot;))

print(root.title)
print(root[0].title)
print(root[1].title)
print(root[1][0].title)
print(root[1][2].title)
print(root[1][1][0].title)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 中国
&gt;&gt;&gt; 河南省
&gt;&gt;&gt; 河北省
&gt;&gt;&gt; 石家庄
&gt;&gt;&gt; 廊坊
&gt;&gt;&gt; 雄安</code></pre></li>
</ol>
<h1 id="二十、面向对象高级和应用"><a href="#二十、面向对象高级和应用" class="headerlink" title="二十、面向对象高级和应用"></a>二十、面向对象高级和应用</h1><img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129122824670.png" class="">

<p>课程目标：掌握面向对象高级知识和相关应用。</p>
<p>今日概要</p>
<ul>
<li>继承【补充】：理解即可（个人开发中使用较少，面试可能涉及）</li>
<li>内置函数【补充】：重要（以后开发中经常使用）</li>
<li>异常处理：重要（以后开发中经常使用）</li>
<li>反射：重要（以后开发中经常使用）</li>
</ul>
<h2 id="1-继承【补充】"><a href="#1-继承【补充】" class="headerlink" title="1. 继承【补充】"></a>1. 继承【补充】</h2><p>对于Python面向对象中的继承，我们已学过：</p>
<ul>
<li><p>继承存在意义：将公共的方法提取到父类中，有利于增加代码重用性。</p>
</li>
<li><p>继承的编写方式：</p>
<pre class="language-python" data-language="python"><code class="language-python"># 继承
class Base(object):
    pass

class Foo(Base):
    pass</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"># 多继承
class Base(object):
    pass

class Bar(object):
    pass

class Foo(Base,Bar):
    pass</code></pre>
</li>
<li><p>调用类中的成员时，遵循：</p>
<ul>
<li>优先在自己所在类中找，没有的话则去父类中找。</li>
<li>如果类存在多继承（多个父类），则先找左边再找右边。</li>
</ul>
</li>
</ul>
<p>上述的知识点掌握之后，其实就可以解决继承相关的大部分问题。</p>
<p>但如果遇到一些特殊情况（不常见），你就可能不知道怎么搞了，例如：</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129134949419.png" class="">



<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129140026593.png" class="">



<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129142756667.png" class="">



<h3 id="1-1-mro和c3算法"><a href="#1-1-mro和c3算法" class="headerlink" title="1.1 mro和c3算法"></a>1.1 mro和c3算法</h3><p>如果类中存在继承关系，在可以通过<code>mro()</code>获取当前类的继承关系（找成员的顺序）。</p>
<p>示例1：</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129134831112.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">mro(A) &#x3D; [A] + [B,C]
mro(A) &#x3D; [A,B,C]</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">mro(A) &#x3D; [A] + merge( mro(B), mro(C), [B,C] )
mro(A) &#x3D; [A] + merge( [object], [object], [] )
mro(A) &#x3D; [A] + [B,C,object]
mro(A) &#x3D; [A,B,C,object]</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">mro(A) &#x3D; [A] + merge( mro(B), mro(C), [B,C] )
mro(A) &#x3D; [A] + merge( [], [C], [,C] 
mro(A) &#x3D; [A] + [B,C]</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class C(object):
    pass

class B(object):
    pass

class A(B, C):
    pass

print( A.mro() )   # [&lt;class &#39;__main__.A&#39;&gt;, &lt;class &#39;__main__.B&#39;&gt;, &lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;object&#39;&gt;]
print( A.__mro__ ) # (&lt;class &#39;__main__.A&#39;&gt;, &lt;class &#39;__main__.B&#39;&gt;, &lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;object&#39;&gt;)</code></pre>



<p>示例2：</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129134912674.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">mro(A) &#x3D; [A] + merge( mro(B), mro(C), [B,C] )
mro(A) &#x3D; [A] + merge( [], [D], [] )
mro(A) &#x3D; [A] + [B,C,D]
mro(A) &#x3D; [A,B,C,D]</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class D(object):
    pass


class C(D):
    pass


class B(object):
    pass


class A(B, C):
    pass


print( A.mro() ) # [&lt;class &#39;__main__.A&#39;&gt;, &lt;class &#39;__main__.B&#39;&gt;, &lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;__main__.D&#39;&gt;, &lt;class &#39;object&#39;&gt;]</code></pre>





<p>示例3:</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129134949419.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">mro(A) &#x3D; [A] + merge( mro(B),mro(C),[B,C])
mro(A) &#x3D; [A] + merge( [], [C], [C])
mro(A) &#x3D; [A,B,D,C]</code></pre>



<pre class="language-python" data-language="python"><code class="language-python">class D(object):
    pass


class C(object):
    pass


class B(D):
    pass


class A(B, C):
    pass


print(A.mro()) # [&lt;class &#39;__main__.A&#39;&gt;, &lt;class &#39;__main__.B&#39;&gt;, &lt;class &#39;__main__.D&#39;&gt;, &lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;object&#39;&gt;]</code></pre>





<p>示例4：</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129140026593.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">mro(A) &#x3D; [A] + merge( mro(B), mro(C), [B,C])

mro(A) &#x3D; [A] + merge( [B,D], [C,D], [B,C])

mro(A) &#x3D; [A] + [B,C,D] 
mro(A) &#x3D; [A,B,C,D] </code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class D(object):
    pass


class C(D):
    pass


class B(D):
    pass


class A(B, C):
    pass


print(A.mro()) # [&lt;class &#39;__main__.A&#39;&gt;, &lt;class &#39;__main__.B&#39;&gt;, &lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;__main__.D&#39;&gt;, &lt;class &#39;object&#39;&gt;]</code></pre>







<p>示例5：</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129142756667.png" class="">

<pre class="language-python" data-language="python"><code class="language-python">简写为：A -&gt; B -&gt; D -&gt; G -&gt; H -&gt; K -&gt; C -&gt; E -&gt; F -&gt; M -&gt; N -&gt; P -&gt; object</code></pre>



<pre class="language-none"><code class="language-none">mro(A) &#x3D; [A] + merge( mro(B),          mro(C),      mro(P),      [B,C,P])
                  []   [N]     [P]          [P]

mro(A) &#x3D; [A,B,D,G,H,K,C,E,F,M,N,P]

-----------------------------------------------------
mro(B) &#x3D; [B] + merge( mro(D), mro(E), [D,E])

mro(D) &#x3D; [D] + merge(mro(G),mro(H), [G,H])

mro(G) &#x3D; [G]

mro(H) &#x3D; [H,K]

mro(B) &#x3D; [B] + merge( [], [E,M], [E])
mro(B) &#x3D; [B,D,G,H,K,E,M]


-----------------------------------------------------
mro(C) &#x3D; [C] + merge(mro(E),mro(F),[E,F])

mro(E) &#x3D; [E,M]

mro(F) &#x3D; [F,M,N] 

mro(C) &#x3D; [C] + merge([M],[M,N] ,[])
mro(C) &#x3D; [C,E,F,M,N]</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class M:
    pass


class N:
    pass


class E(M):
    pass


class G:
    pass


class K:
    pass


class H(K):
    pass


class D(G, H):
    pass


class F(M, N):
    pass


class P:
    pass


class C(E, F):
    pass


class B(D, E):
    pass


class A(B, C, P):
    pass


print(A.mro()) # 简写为：A -&gt; B -&gt; D -&gt; G -&gt; H -&gt; K -&gt; C -&gt; E -&gt; F -&gt; M -&gt; N -&gt; P -&gt; object</code></pre>



<p><strong>特别补充：一句话搞定继承关系</strong></p>
<p>不知道你是否发现，如果用正经的C3算法规则去分析一个类继承关系有点繁琐，尤其是遇到一个复杂的类也要分析很久。</p>
<p>所以，我自己根据经验总结了一句话赠送给大家：<span style="color:red"><strong>从左到右，深度优先，大小钻石，留住顶端</strong></span>，基于这句话可以更快的找到继承关系。</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210129142756667.png" class="">

<pre class="language-none"><code class="language-none">简写为：A -&gt; B -&gt; D -&gt; G -&gt; H -&gt; K -&gt; C -&gt; E -&gt; F -&gt; M -&gt; N -&gt; P -&gt; object</code></pre>



<h3 id="1-2-py2和py3区别（了解）"><a href="#1-2-py2和py3区别（了解）" class="headerlink" title="1.2 py2和py3区别（了解）"></a>1.2 py2和py3区别（了解）</h3><p>概述：</p>
<ul>
<li><p>在python2.2之前，只支持经典类【从左到右，深度优先，大小钻石，不留顶端】</p>
</li>
<li><p>后来，Python想让类默认继承object（其他语言的面向对象基本上也都是默认都继承object），此时发现原来的经典类不能直接集成这个功能，有Bug。</p>
</li>
<li><p>所以，Python决定不再原来的经典类上进行修改了，而是再创建一个新式类来支持这个功能。【从左到右，深度优先，大小钻石，留住顶端。】</p>
<ul>
<li><p>经典类，不继承object类型</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo:
    pass</code></pre>
</li>
<li><p>新式类，直接或间接继承object</p>
<pre class="language-python" data-language="python"><code class="language-python">class Base(object):
    pass

class Foo(Base):
    pass</code></pre></li>
</ul>
</li>
<li><p>这样，python2.2之后 中就出现了经典类和新式类共存。（正式支持是2.3）</p>
</li>
<li><p>最终，python3中丢弃经典类，只保留新式类。</p>
</li>
</ul>
<pre class="language-none"><code class="language-none">详细文档：https:&#x2F;&#x2F;www.python.org&#x2F;dev&#x2F;peps&#x2F;pep-0253&#x2F;#mro-method-resolution-order-the-lookup-rule

In classic Python, the rule is given by the following recursive function, also known as the left-to-right depth-first rule.

def classic_lookup(cls, name):
    if cls.__dict__.has_key(name):
        return cls.__dict__[name]
    for base in cls.__bases__:
        try:
            return classic_lookup(base, name)
        except AttributeError:
            pass
    raise AttributeError, name
    
The problem with this becomes apparent when we consider a &quot;diamond diagram&quot;:

      class A:
        ^ ^  def save(self): ...
       &#x2F;   \
      &#x2F;     \
     &#x2F;       \
    &#x2F;         \
class B     class C:
    ^         ^  def save(self): ...
     \       &#x2F;
      \     &#x2F;
       \   &#x2F;
        \ &#x2F;
      class D
      

Arrows point from a subtype to its base type(s). This particular diagram means B and C derive from A, and D derives from B and C (and hence also, indirectly, from A).

Assume that C overrides the method save(), which is defined in the base A. (C.save() probably calls A.save() and then saves some of its own state.) B and D don&#39;t override save(). When we invoke save() on a D instance, which method is called? According to the classic lookup rule, A.save() is called, ignoring C.save()!

This is not good. It probably breaks C (its state doesn&#39;t get saved), defeating the whole purpose of inheriting from C in the first place.

Why was this not a problem in classic Python? Diamond diagrams are rarely found in classic Python class hierarchies. Most class hierarchies use single inheritance, and multiple inheritance is usually confined to mix-in classes. In fact, the problem shown here is probably the reason why multiple inheritance is unpopular in classic Python.

Why will this be a problem in the new system? The &#39;object&#39; type at the top of the type hierarchy defines a number of methods that can usefully be extended by subtypes, for example __getattr__().

(Aside: in classic Python, the __getattr__() method is not really the implementation for the get-attribute operation; it is a hook that only gets invoked when an attribute cannot be found by normal means. This has often been cited as a shortcoming -- some class designs have a legitimate need for a __getattr__() method that gets called for all attribute references. But then of course this method has to be able to invoke the default implementation directly. The most natural way is to make the default implementation available as object.__getattr__(self, name).)

Thus, a classic class hierarchy like this:

class B     class C:
    ^         ^  def __getattr__(self, name): ...
     \       &#x2F;
      \     &#x2F;
       \   &#x2F;
        \ &#x2F;
      class D
      

will change into a diamond diagram under the new system:

      object:
        ^ ^  __getattr__()
       &#x2F;   \
      &#x2F;     \
     &#x2F;       \
    &#x2F;         \
class B     class C:
    ^         ^  def __getattr__(self, name): ...
     \       &#x2F;
      \     &#x2F;
       \   &#x2F;
        \ &#x2F;
      class D


and while in the original diagram C.__getattr__() is invoked, under the new system with the classic lookup rule, object.__getattr__() would be invoked!

Fortunately, there&#39;s a lookup rule that&#39;s better. It&#39;s a bit difficult to explain, but it does the right thing in the diamond diagram, and it is the same as the classic lookup rule when there are no diamonds in the inheritance graph (when it is a tree).

</code></pre>







<p>总结：Python2和Python3在关于面向对象的区别。</p>
<ul>
<li><p>Py2：</p>
<ul>
<li><p>经典类，未继承object类型。【从左到右，深度优先，大小钻石，不留顶端】</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo:
    pass</code></pre>
</li>
<li><p>新式类，直接获取间接继承object类型。【从左到右，深度优先，大小钻石，留住顶端 – C3算法】</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    pass</code></pre>

<p>  或</p>
  <pre class="language-python" data-language="python"><code class="language-python">class Base(object):
    pass

class Foo(Base):
    pass</code></pre></li>
</ul>
</li>
<li><p>Py3</p>
<ul>
<li><p>新式类，丢弃了经典类只保留了新式类。【从左到右，深度优先，大小钻石，留住顶端 – C3算法】</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo:
    pass

class Bar(object):
    pass</code></pre></li>
</ul>
</li>
</ul>
<h2 id="2-内置函数补充"><a href="#2-内置函数补充" class="headerlink" title="2. 内置函数补充"></a>2. 内置函数补充</h2><p>本次要给讲解的内置函数共8个，他们都跟面向对象的知识相关。</p>
<ul>
<li><p>classmethod、staticmethod、property 。</p>
</li>
<li><p>callable，是否可在后面加括号执行。</p>
<ul>
<li><p>函数</p>
<pre class="language-python" data-language="python"><code class="language-python">def func():
    pass

print( callable(func) ) # True</code></pre>
</li>
<li><p>类</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    pass

print( callable(Foo) ) # True</code></pre>
</li>
<li><p>类中具有<code>__call__</code>方法的对象</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
	pass

obj &#x3D; Foo()
print( callable(obj) ) # False</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):

    def __call__(self, *args, **kwargs):
        pass
    
obj &#x3D; Foo()
print( callable(obj) ) # True</code></pre></li>
</ul>
<p>所以当你以后在见到下面的情况时，首先就要想到handler可以是：函数、类、具有call方法的对象 这三种，到底具体是什么，需要根据代码的调用关系才能分析出来。</p>
<pre class="language-python" data-language="python"><code class="language-python">def do_something(handler):
    handler()</code></pre>
</li>
<li><p>super，按照mro继承关系向上找成员。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Top(object):
    def message(self, num):
        print(&quot;Top.message&quot;, num)
        
class Base(Top):
    pass

class Foo(Base):

    def message(self, num):
        print(&quot;Foo.message&quot;, num)
        super().message(num + 100)


obj &#x3D; Foo()
obj.message(1)

&gt;&gt;&gt; Foo.message 1
&gt;&gt;&gt; Top.message 101</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Base(object):

    def message(self, num):
        print(&quot;Base.message&quot;, num)
        super().message(1000)


class Bar(object):

    def message(self, num):
        print(&quot;Bar.message&quot;, num)


class Foo(Base, Bar):
    pass


obj &#x3D; Foo()
obj.message(1)

&gt;&gt;&gt; Base.message 1
&gt;&gt;&gt; Bar.message 1000</code></pre>



<p><strong>应用场景</strong></p>
<p>假设有一个类，他原来已实现了某些功能，但我们想在他的基础上再扩展点功能，重新写一遍？比较麻烦，此时可以用super。</p>
<pre class="language-python" data-language="python"><code class="language-python">info &#x3D; dict() # &#123;&#125;
info[&#39;name&#39;] &#x3D; &quot;武沛齐&quot;
info[&quot;age&quot;] &#x3D; 18

value &#x3D; info.get(&quot;age&quot;)

print(value)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class MyDict(dict):

    def get(self, k):
        print(&quot;自定义功能&quot;)
        return super().get(k)


info &#x3D; MyDict()
info[&#39;name&#39;] &#x3D; &quot;武沛齐&quot; # __setitem__
info[&quot;age&quot;] &#x3D; 18       # __setitem__
print(info)

value &#x3D; info.get(&quot;age&quot;)

print(value)</code></pre>

<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210131150707551.png" class="">


</li>
<li><p>type，获取一个对象的类型。</p>
<pre class="language-python" data-language="python"><code class="language-python">v1 &#x3D; &quot;武沛齐&quot;
result &#x3D; type(v1)
print(result) # &lt;class &#39;str&#39;&gt;</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">v2 &#x3D; &quot;武沛齐&quot;
print( type(v2) &#x3D;&#x3D; str )  # True

v3 &#x3D; [11, 22, 33] # list(...)
print( type(v3) &#x3D;&#x3D; list )  # True</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    pass

v4 &#x3D; Foo()

print( type(v4) &#x3D;&#x3D; Foo )  # True</code></pre>
</li>
<li><p>isinstance，判断对象是否是某个类或其子类的实例。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Top(object):
    pass


class Base(Top):
    pass


class Foo(Base):
    pass


v1 &#x3D; Foo()

print( isinstance(v1, Foo) )   # True，对象v1是Foo类的实例
print( isinstance(v1, Base) )  # True，对象v1的Base子类的实例。
print( isinstance(v1, Top) )   # True，对象v1的Top子类的实例。</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class Animal(object):
    def run(self):
        pass

class Dog(Animal):
    pass

class Cat(Animal):
    pass

data_list &#x3D; [
    &quot;alex&quot;,
    Dog(),
    Cat(),
	&quot;root&quot;
]

for item in data_list:
    if type(item) &#x3D;&#x3D; Cat:
        item.run()
    elif type(item) &#x3D;&#x3D; Dog:
        item.run()
    else:
        pass
    
for item in data_list:
    if isinstance(item, Animal):
        item.run()
    else:
        pass</code></pre>


</li>
<li><p>issubclass，判断类是否是某个类的子孙类。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Top(object):
    pass


class Base(Top):
    pass


class Foo(Base):
    pass


print(issubclass(Foo, Base))  # True
print(issubclass(Foo, Top))   # True</code></pre></li>
</ul>
<h2 id="3-异常处理"><a href="#3-异常处理" class="headerlink" title="3.异常处理"></a>3.异常处理</h2><p>在程序开发中如果遇到一些 <code>不可预知</code>的错误 或 你懒得做一些判断 时，可以选择用异常处理来做。</p>
<pre class="language-python" data-language="python"><code class="language-python">import requests

while True:
    url &#x3D; input(&quot;请输入要下载网页地址：&quot;)
    res &#x3D; requests.get(url&#x3D;url)
    with open(&#39;content.txt&#39;, mode&#x3D;&#39;wb&#39;) as f:
        f.write(res.content)</code></pre>

<p>上述下载视频的代码在正常情况下可以运行，但如果遇到网络出问题，那么此时程序就会报错无法正常执行。</p>
<pre class="language-python" data-language="python"><code class="language-python">try:
    res &#x3D; requests.get(url&#x3D;url)
except Exception as e:
    代码块，上述代码出异常待执行。
print(&quot;结束&quot;)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">import requests

while True:
    url &#x3D; input(&quot;请输入要下载网页地址：&quot;)
    
    try:
        res &#x3D; requests.get(url&#x3D;url)
    except Exception as e:
        print(&quot;请求失败，原因：&#123;&#125;&quot;.format(str(e)))
        continue
        
    with open(&#39;content.txt&#39;, mode&#x3D;&#39;wb&#39;) as f:
        f.write(res.content)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">num1 &#x3D; input(&quot;请输入数字：&quot;)
num2 &#x3D; input(&quot;请输入数字：&quot;)
try:
    num1 &#x3D; int(num1)
    num2 &#x3D; int(num2)
    result &#x3D; num1 + num2
    print(result)
except Exception as e:
    print(&quot;输入错误&quot;)</code></pre>

<p>以后常见的应用场景：</p>
<ul>
<li><p>调用微信的API实现微信消息的推送、微信支付等</p>
</li>
<li><p>支付宝支付、视频播放等</p>
</li>
<li><p>数据库 或 redis连接和操作</p>
</li>
<li><p>调用第三方的视频播放发的功能，由第三方的程序出问题导致的错误。</p>
</li>
</ul>
<p>异常处理的基本格式：</p>
<pre class="language-python" data-language="python"><code class="language-python">try:
    # 逻辑代码
except Exception as e:
    # try中的代码如果有异常，则此代码块中的代码会执行。</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">try:
    # 逻辑代码
except Exception as e:
    # try中的代码如果有异常，则此代码块中的代码会执行。
finally:
    # try中的代码无论是否报错，finally中的代码都会执行，一般用于释放资源。

print(&quot;end&quot;)

&quot;&quot;&quot;
try:
    file_object &#x3D; open(&quot;xxx.log&quot;)
    # ....
except Exception as e:
    # 异常处理
finally:
    file_object.close()  # try中没异常，最后执行finally关闭文件；try有异常，执行except中的逻辑，最后再执行finally关闭文件。
&quot;&quot;&quot;    </code></pre>







<h3 id="3-1-异常细分"><a href="#3-1-异常细分" class="headerlink" title="3.1 异常细分"></a>3.1 异常细分</h3><pre class="language-python" data-language="python"><code class="language-python">import requests

while True:
    url &#x3D; input(&quot;请输入要下载网页地址：&quot;)
    
    try:
        res &#x3D; requests.get(url&#x3D;url)
    except Exception as e:
        print(&quot;请求失败，原因：&#123;&#125;&quot;.format(str(e)))
        continue
        
    with open(&#39;content.txt&#39;, mode&#x3D;&#39;wb&#39;) as f:
        f.write(res.content)</code></pre>

<p>之前只是简单的捕获了异常，出现异常则统一提示信息即可。如果想要对异常进行更加细致的异常处理，则可以这样来做：</p>
<pre class="language-python" data-language="python"><code class="language-python">import requests
from requests import exceptions

while True:
    url &#x3D; input(&quot;请输入要下载网页地址：&quot;)
    try:
        res &#x3D; requests.get(url&#x3D;url)
        print(res)    
    except exceptions.MissingSchema as e:
        print(&quot;URL架构不存在&quot;)
    except exceptions.InvalidSchema as e:
        print(&quot;URL架构错误&quot;)
    except exceptions.InvalidURL as e:
        print(&quot;URL地址格式错误&quot;)
    except exceptions.ConnectionError as e:
        print(&quot;网络连接错误&quot;)
    except Exception as e:
        print(&quot;代码出现错误&quot;, e)
        
# 提示：如果想要写的简单一点，其实只写一个Exception捕获错误就可以了。</code></pre>



<p>如果想要对错误进行细分的处理，例如：发生Key错误和发生Value错误分开处理。</p>
<p>基本格式：</p>
<pre class="language-python" data-language="python"><code class="language-python">try:
    # 逻辑代码
    pass

except KeyError as e:
    # 小兵，只捕获try代码中发现了键不存在的异常，例如：去字典 info_dict[&quot;n1&quot;] 中获取数据时，键不存在。
    print(&quot;KeyError&quot;)

except ValueError as e:
    # 小兵，只捕获try代码中发现了值相关错误，例如：把字符串转整型 int(&quot;无诶器&quot;)
    print(&quot;ValueError&quot;)

except Exception as e:
    # 王者，处理上面except捕获不了的错误（可以捕获所有的错误）。
    print(&quot;Exception&quot;)</code></pre>

<p>Python中内置了很多细分的错误，供你选择。</p>
<pre class="language-python" data-language="python"><code class="language-python">常见异常：
&quot;&quot;&quot;
AttributeError 试图访问一个对象没有的树形，比如foo.x，但是foo没有属性x
IOError 输入&#x2F;输出异常；基本上是无法打开文件
ImportError 无法引入模块或包；基本上是路径问题或名称错误
IndentationError 语法错误（的子类） ；代码没有正确对齐
IndexError 下标索引超出序列边界，比如当x只有三个元素，却试图访问n x[5]
KeyError 试图访问字典里不存在的键 inf[&#39;xx&#39;]
KeyboardInterrupt Ctrl+C被按下
NameError 使用一个还未被赋予对象的变量
SyntaxError Python代码非法，代码不能编译(个人认为这是语法错误，写错了）
TypeError 传入对象类型与要求的不符合
UnboundLocalError 试图访问一个还未被设置的局部变量，基本上是由于另有一个同名的全局变量，
导致你以为正在访问它
ValueError 传入一个调用者不期望的值，即使值的类型是正确的
&quot;&quot;&quot;
更多异常：
&quot;&quot;&quot;
ArithmeticError
AssertionError
AttributeError
BaseException
BufferError
BytesWarning
DeprecationWarning
EnvironmentError
EOFError
Exception
FloatingPointError
FutureWarning
GeneratorExit
ImportError
ImportWarning
IndentationError
IndexError
IOError
KeyboardInterrupt
KeyError
LookupError
MemoryError
NameError
NotImplementedError
OSError
OverflowError
PendingDeprecationWarning
ReferenceError
RuntimeError
RuntimeWarning
StandardError
StopIteration
SyntaxError
SyntaxWarning
SystemError
SystemExit
TabError
TypeError
UnboundLocalError
UnicodeDecodeError
UnicodeEncodeError
UnicodeError
UnicodeTranslateError
UnicodeWarning
UserWarning
ValueError
Warning
ZeroDivisionError
&quot;&quot;&quot;</code></pre>



<h3 id="3-2-自定义异常-amp-抛出异常"><a href="#3-2-自定义异常-amp-抛出异常" class="headerlink" title="3.2 自定义异常&amp;抛出异常"></a>3.2 自定义异常&amp;抛出异常</h3><p>上面都是Python内置的异常，只有遇到特定的错误之后才会抛出相应的异常。</p>
<p>其实，在开发中也可以自定义异常。</p>
<pre class="language-python" data-language="python"><code class="language-python">class MyException(Exception):
    pass</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">try:
    pass
except MyException as e:
    print(&quot;MyException异常被触发了&quot;, e)
except Exception as e:
    print(&quot;Exception&quot;, e)</code></pre>

<p>上述代码在except中定义了捕获MyException异常，但他永远不会被触发。因为默认的那些异常都有特定的触发条件，例如：索引不存在、键不存在会触发IndexError和KeyError异常。</p>
<p>对于我们自定义的异常，如果想要触发，则需要使用：<code>raise MyException()</code>类实现。</p>
<pre class="language-python" data-language="python"><code class="language-python">class MyException(Exception):
    pass


try:
    # 。。。
    raise MyException()
    # 。。。
except MyException as e:
    print(&quot;MyException异常被触发了&quot;, e)
except Exception as e:
    print(&quot;Exception&quot;, e)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class MyException(Exception):
    def __init__(self, msg, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.msg &#x3D; msg


try:
    raise MyException(&quot;xxx失败了&quot;)
except MyException as e:
    print(&quot;MyException异常被触发了&quot;, e.msg)
except Exception as e:
    print(&quot;Exception&quot;, e)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">class MyException(Exception):
    title &#x3D; &quot;请求错误&quot;


try:
    raise MyException()
except MyException as e:
    print(&quot;MyException异常被触发了&quot;, e.title)
except Exception as e:
    print(&quot;Exception&quot;, e)</code></pre>



<p><strong>案例一</strong>：你我合作协同开发，你调用我写的方法。</p>
<ul>
<li><p>我定义了一个函数</p>
<pre class="language-python" data-language="python"><code class="language-python">class EmailValidError(Exception):
    title &#x3D; &quot;邮箱格式错误&quot;

class ContentRequiredError(Exception):
    title &#x3D; &quot;文本不能为空错误&quot;
    
def send_email(email,content):
    if not re.match(&quot;\w+@live.com&quot;,email):
        raise EmailValidError()
	if len(content) &#x3D;&#x3D; 0 :
        raise ContentRequiredError()
	# 发送邮件代码...
    # ...</code></pre>
</li>
<li><p>你调用我写的函数</p>
<pre class="language-python" data-language="python"><code class="language-python">def execute():
    # 其他代码
    # ...
    
	try:
        send_email(...)
    except EmailValidError as e:
        pass
    except ContentRequiredError as e:
        pass
    except Exception as e:
        print(&quot;发送失败&quot;)

execute()

# 提示：如果想要写的简单一点，其实只写一个Exception捕获错误就可以了。</code></pre></li>
</ul>
<p><strong>案例二</strong>：在框架内部已经定义好，遇到什么样的错误都会触发不同的异常。</p>
<pre class="language-python" data-language="python"><code class="language-python">import requests
from requests import exceptions

while True:
    url &#x3D; input(&quot;请输入要下载网页地址：&quot;)
    try:
        res &#x3D; requests.get(url&#x3D;url)
        print(res)    
    except exceptions.MissingSchema as e:
        print(&quot;URL架构不存在&quot;)
    except exceptions.InvalidSchema as e:
        print(&quot;URL架构错误&quot;)
    except exceptions.InvalidURL as e:
        print(&quot;URL地址格式错误&quot;)
    except exceptions.ConnectionError as e:
        print(&quot;网络连接错误&quot;)
    except Exception as e:
        print(&quot;代码出现错误&quot;, e)
        
# 提示：如果想要写的简单一点，其实只写一个Exception捕获错误就可以了。</code></pre>



<p><strong>案例三</strong>：按照规定去触发指定的异常，每种异常都具备被特殊的含义。</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210131231423064.png" class="">







<h3 id="3-4-特殊的finally"><a href="#3-4-特殊的finally" class="headerlink" title="3.4 特殊的finally"></a>3.4 特殊的finally</h3><pre class="language-python" data-language="python"><code class="language-python">try:
    # 逻辑代码
except Exception as e:
    # try中的代码如果有异常，则此代码块中的代码会执行。
finally:
    # try中的代码无论是否报错，finally中的代码都会执行，一般用于释放资源。

print(&quot;end&quot;)</code></pre>

<p>当在函数或方法中定义异常处理的代码时，要特别注意finally和return。</p>
<pre class="language-python" data-language="python"><code class="language-python">def func():
    try:
        return 123
    except Exception as e:
        pass
    finally:
        print(666)
        
func()</code></pre>

<p>在try或except中即使定义了return，也会执行最后的finally块中的代码。</p>
<h3 id="练习题-1"><a href="#练习题-1" class="headerlink" title="练习题"></a>练习题</h3><ol>
<li><p>补充代码实现捕获程序中的错误。</p>
<pre class="language-python" data-language="python"><code class="language-python"># 迭代器
class IterRange(object):
    def __init__(self, num):
        self.num &#x3D; num
        self.counter &#x3D; -1

    def __iter__(self):
        return self

    def __next__(self):
        self.counter +&#x3D; 1
        if self.counter &#x3D;&#x3D; self.num:
            raise StopIteration()
        return self.counter

    
obj &#x3D; IterRange(20)

while True:
    try:
    	ele &#x3D; next(obj)
	except StopIteration as e:
        print(&quot;数据获取完毕&quot;)
        break
    print(ele)
    </code></pre>
</li>
<li><p>补充代码实现捕获程序中的错误。</p>
<pre class="language-python" data-language="python"><code class="language-python">class IterRange(object):
    def __init__(self, num):
        self.num &#x3D; num
        self.counter &#x3D; -1

    def __iter__(self):
        return self

    def __next__(self):
        self.counter +&#x3D; 1
        if self.counter &#x3D;&#x3D; self.num:
            raise StopIteration()
        return self.counter


class Xrange(object):
    def __init__(self, max_num):
        self.max_num &#x3D; max_num

    def __iter__(self):
        return IterRange(self.max_num)


data_object &#x3D; Xrange(100)
obj_iter &#x3D; data_object.__iter__()

while True:
    try:
    	ele &#x3D; next(obj_iter)
	except StopIteration as e:
        print(&quot;数据获取完毕&quot;)
        break
    print(ele)</code></pre>
</li>
<li><p>补充代码实现捕获程序中的错误。</p>
<pre class="language-python" data-language="python"><code class="language-python">def func():
    yield 1
    yield 2
    yield 3
    
gen &#x3D; func()
while True:
    try:
    	ele &#x3D; next(gen)
	except StopIteration as e:
        print(&quot;数据获取完毕&quot;)
        break
    print(ele)</code></pre>
</li>
<li><p>补充代码实现捕获程序中的错误。（注意：本案例用于练习，在真是开发中对于这种情况建议还是自己做判断处理，不要用异常）</p>
<pre class="language-python" data-language="python"><code class="language-python">num &#x3D; int(&quot;武沛齐&quot;)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">try:
    num &#x3D; int(&quot;武沛齐&quot;)
except ValueError as e:
    print(&quot;转换失败&quot;)</code></pre>
</li>
<li><p>补充代码实现捕获程序中的错误。（注意：本案例用于练习，在真是开发中对于这种情况建议还是自己做判断处理，不要用异常）</p>
<pre class="language-python" data-language="python"><code class="language-python">data &#x3D; [11,22,33,44,55]
data[1000]</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">try:
    data &#x3D; [11,22,33,44,55]
	data[1000]
except IndexError as e:
    print(&quot;转换失败&quot;)</code></pre>


</li>
<li><p>补充代码实现捕获程序中的错误。（注意：本案例用于练习，在真是开发中对于这种情况建议还是自己做判断处理，不要用异常）</p>
<pre class="language-python" data-language="python"><code class="language-python">data &#x3D; &#123;&quot;k1&quot;:123,&quot;k2&quot;:456&#125;
data[&quot;xxxx&quot;]</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">try:
    data &#x3D; &#123;&quot;k1&quot;:123,&quot;k2&quot;:456&#125;
	data[&quot;xxxx&quot;]
except KyeError as e:
    print(&quot;转换失败&quot;)</code></pre>
</li>
<li><p>分析代码，写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class MyDict(dict):

    def __getitem__(self, item):
        try:
            return super().__getitem__(item) # KeyError
        except KeyError as e:
            return None


info &#x3D; MyDict()
info[&#39;name&#39;] &#x3D; &quot;武沛齐&quot;
info[&#39;wx&#39;] &#x3D; &quot;wupeiq666&quot;

print(info[&#39;wx&#39;])     # info[&#39;wx&#39;]  -&gt; __getitem__
print(info[&#39;email&#39;])  # info[&#39;email&#39;]  -&gt; __getitem__</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; wupeiq666
&gt;&gt;&gt; None</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">def run(handler):
    try:
        num &#x3D; handler()
        print(num)
        return &quot;成功&quot;
    except Exception as e:
        return &quot;错误&quot;
    finally:
        print(&quot;END&quot;)

    print(&quot;结束&quot;)


res &#x3D; run(lambda: 123) 
print(res)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 123
&gt;&gt;&gt; END
&gt;&gt;&gt; 成功</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">def func():
    print(666)
    return &quot;成功&quot;

def run(handler):
    try:
        num &#x3D; handler()
        print(num)
        return func()
    except Exception as e:
        return &quot;错误&quot;
    finally:
        print(&quot;END&quot;)

    print(&quot;结束&quot;)


res &#x3D; run(lambda: 123) 
print(res)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 123
&gt;&gt;&gt; 666
&gt;&gt;&gt; END
&gt;&gt;&gt; 成功</code></pre></li>
</ol>
<h2 id="4-反射"><a href="#4-反射" class="headerlink" title="4.反射"></a>4.反射</h2><p>反射，提供了一种更加灵活的方式让你可以实现去 对象 中操作成员（以字符串的形式去 <code>对象</code> 中进行成员的操作）。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    
    def __init__(self,name,wx):
        self.name &#x3D; name
        self.wx &#x3D; wx
	
    def show(self):
        message &#x3D; &quot;姓名&#123;&#125;，微信：&#123;&#125;&quot;.format(self.name,self.wx)
        
        
user_object &#x3D; Person(&quot;武沛齐&quot;,&quot;wupeiqi666&quot;)


# 对象.成员 的格式去获取数据
user_object.name
user_object.wx
user_object.show()

# 对象.成员 的格式无设置数据
user_object.name &#x3D; &quot;吴培期&quot;</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">user &#x3D; Person(&quot;武沛齐&quot;,&quot;wupeiqi666&quot;)

# getattr 获取成员
getattr(user,&quot;name&quot;) # user.name
getattr(user,&quot;wx&quot;)   # user.wx


method &#x3D; getattr(user,&quot;show&quot;) # user.show
method()
# 或
getattr(user,&quot;show&quot;)()

# setattr 设置成员
setattr(user, &quot;name&quot;, &quot;吴培期&quot;) # user.name &#x3D; &quot;吴培期&quot;</code></pre>

<p>Python中提供了4个内置函数来支持反射：</p>
<ul>
<li><p>getattr</p>
<pre class="language-none"><code class="language-none">v1 &#x3D; getattr(对象,&quot;成员名称&quot;)
v2 &#x3D; getattr(对象,&quot;成员名称&quot;, 不存在时的默认值)</code></pre>
</li>
<li><p>setattr，去对象中设置成员</p>
<pre class="language-none"><code class="language-none">setattr(对象,&quot;成员名称&quot;,值)</code></pre>
</li>
<li><p>hasattr，对象中是否包含成员</p>
<pre class="language-none"><code class="language-none">v1 &#x3D; hasattr(对象,&quot;成员名称&quot;) # True&#x2F;False</code></pre>
</li>
<li><p>delattr，删除对象中的成员</p>
<pre class="language-none"><code class="language-none">delattr(对象,&quot;成员名称&quot;)</code></pre></li>
</ul>
<p>以后如果再遇到 对象.成员 这种编写方式时，均可以基于反射来实现。</p>
<p>案例：</p>
<pre class="language-python" data-language="python"><code class="language-python">class Account(object):

    def login(self):
        pass

    def register(self):
        pass

    def index(self):
        pass

    
def run(self):
    name &#x3D; input(&quot;请输入要执行的方法名称：&quot;) # index register login xx run ..
    
    account_object &#x3D; Account()
    method &#x3D; getattr(account_object, name) # index &#x3D; getattr(account_object,&quot;index&quot;)
    
    if not method:
        print(&quot;输入错误&quot;)
        return 
    method()</code></pre>



<h3 id="4-1-一些皆对象"><a href="#4-1-一些皆对象" class="headerlink" title="4.1 一些皆对象"></a>4.1 一些皆对象</h3><p>在Python中有这么句话：<code>一切皆对象</code>。 每个对象的内部都有自己维护的成员。</p>
<ul>
<li><p>对象是对象</p>
<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    
    def __init__(self,name,wx):
        self.name &#x3D; name
        self.wx &#x3D; wx
	
    def show(self):
        message &#x3D; &quot;姓名&#123;&#125;，微信：&#123;&#125;&quot;.format(self.name,self.wx)
        
        
user_object &#x3D; Person(&quot;武沛齐&quot;,&quot;wupeiqi666&quot;)
user_object.name</code></pre>
</li>
<li><p>类是对象</p>
<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    title &#x3D; &quot;武沛齐&quot;

Person.title
# Person类也是一个对象（平时不这么称呼）</code></pre>
</li>
<li><p>模块是对象</p>
<pre class="language-python" data-language="python"><code class="language-python">import re

re.match
# re模块也是一个对象（平时不这么称呼）。</code></pre></li>
</ul>
<p>由于反射支持以字符串的形式去对象中操作成员【等价于 对象.成员 】，所以，基于反射也可以对类、模块中的成员进行操作。</p>
<p>简单粗暴：只要看到 xx.oo 都可以用反射实现。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    title &#x3D; &quot;武沛齐&quot;

v1 &#x3D; Person.title
print(v1)
v2 &#x3D; getattr(Person,&quot;title&quot;)
print(v2)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python">import re

v1 &#x3D; re.match(&quot;\w+&quot;,&quot;dfjksdufjksd&quot;)
print(v1)

func &#x3D; getattr(re,&quot;match&quot;)
v2 &#x3D; func(&quot;\w+&quot;,&quot;dfjksdufjksd&quot;)
print(v2)</code></pre>



<h3 id="4-2-import-module-反射"><a href="#4-2-import-module-反射" class="headerlink" title="4.2 import_module + 反射"></a><font color="#dd0000">4.2 import_module + 反射</font></h3><p>在Python中如果想要导入一个模块，可以通过import语法导入；企业也可以通过字符串的形式导入。<font color="#dd0000"><strong>可提高代码的可扩展性。</strong></font></p>
<p>示例一：</p>
<pre class="language-python" data-language="python"><code class="language-python"># 导入模块
import random

v1 &#x3D; random.randint(1,100)</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"># 导入模块
from importlib import import_module

m &#x3D; import_module(&quot;random&quot;)

v1 &#x3D; m.randint(1,100)</code></pre>

<p>示例二：</p>
<pre class="language-python" data-language="python"><code class="language-python"># 导入模块exceptions
from requests import exceptions as m</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"># 导入模块exceptions
from importlib import import_module
m &#x3D; import_module(&quot;requests.exceptions&quot;)</code></pre>

<p>示例三：</p>
<pre class="language-python" data-language="python"><code class="language-python"># 导入模块exceptions，获取exceptions中的InvalidURL类。
from requests.exceptions import InvalidURL</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"># 错误方式
from importlib import import_module
m &#x3D; import_module(&quot;requests.exceptions.InvalidURL&quot;) # 报错，import_module只能导入到模块级别。</code></pre>

<pre class="language-python" data-language="python"><code class="language-python"># 导入模块
from importlib import import_module
m &#x3D; import_module(&quot;requests.exceptions&quot;)
# 去模块中获取类
cls &#x3D; m.InvalidURL</code></pre>



<p>在很多项目的源码中都会有 <code>import_module</code> 和 <code>getattr</code> 配合实现根据字符串的形式导入模块并获取成员，例如：</p>
<pre class="language-python" data-language="python"><code class="language-python">from importlib import import_module

path &#x3D; &quot;openpyxl.utils.exceptions.InvalidFileException&quot;

module_path,class_name &#x3D; path.rsplit(&quot;.&quot;,maxsplit&#x3D;1) # &quot;openpyxl.utils.exceptions&quot;   &quot;InvalidFileException&quot;

module_object &#x3D; import_module(module_path)

cls &#x3D; getattr(module_object,class_name)

print(cls)</code></pre>



<p>我们在开发中也可以基于这个来进行开发，提高代码的可扩展性，例如：请在项目中实现一个发送 短信、微信 的功能。</p>
<p>参考示例代码中的：auto_message 项目。</p>
<h2 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h2><ol>
<li><p>了解 mro和c3算法</p>
</li>
<li><p>python2和python3在面向对象中的区别。</p>
</li>
<li><p>内置函数</p>
<pre class="language-none"><code class="language-none">staticmethod,classmethod,property,callable,type,isinstance,issubclass,super
getattr,setattr,hasattr,delattr</code></pre>
</li>
<li><p>异常处理</p>
</li>
<li><p>根据字符串的形式导入模块 <code>import_module</code></p>
</li>
<li><p>根据字符串的形式操作成员 <code>反射-getattr,setattr,hasattr,delattr</code></p>
</li>
</ol>
<h2 id="作业-2"><a href="#作业-2" class="headerlink" title="作业"></a>作业</h2><ol>
<li><p>super的作用？</p>
<p>答：super()可以调用上n层继承关系中的类的变量和方法</p>
<p><font color="#dd0000">存在问题：未掌握知识点</font></p>
<p>答案：按照类的mro继承关系，去上级查找相关成员。</p>
</li>
<li><p>看图分析类A的继承关系</p>
<img src="/2022/06/15/python-mo-kuai-san-day1/image-20210202180951900.png" class="">

<p>答：A-&gt;B-&gt;C-&gt;M-&gt;D-&gt;F-&gt;J-&gt;G-&gt;H</p>
</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __init__(self, name, age):
        self.name &#x3D; name
        self.age &#x3D; age

    @property
    def message(self):
        return &quot;&#123;&#125;-&#123;&#125;&quot;.format(self.name, self.age)


class Bar(Foo):
    def __init__(self, email, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.email &#x3D; email

    def total(self):
        data &#x3D; &quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;.format(self.name, self.age, self.email)
        return data


obj1 &#x3D; Foo(&quot;武沛齐&quot;, 20)
print(obj1.message)

obj2 &#x3D; Bar(&quot;xx@live.com&quot;, &quot;root&quot;, 100)
print(obj2.message)
obj2.total()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; 武沛齐-20
&gt;&gt;&gt; root-100</code></pre>


</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Foo(object):
    def __call__(self, *args, **kwargs):
        return 666
    
data_list &#x3D; [
    &quot;武沛齐&quot;,
    dict,
	lambda :123,
    True,
    Foo,
    Foo()
]

for item in data_list:
    if callable(item):
        val &#x3D; item()
        print(val)
	else:
        print(item)</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; &quot;武沛齐&quot;
&gt;&gt;&gt; &#123;&#125;
&gt;&gt;&gt; 123
&gt;&gt;&gt; True
&gt;&gt;&gt; 对象 FOO()
&gt;&gt;&gt; 666</code></pre>


</li>
<li><p>如何主动触发一个异常？</p>
<p>答：raise + 异常类（…）</p>
</li>
<li><p>反射的作用？</p>
<p>答：可以基于字符串操作加上xxxattr()等方法获取到指定模块以及内部的成员，增强代码的可拓展性。</p>
</li>
<li><p>看代码写结果</p>
<pre class="language-python" data-language="python"><code class="language-python">class Person(object):
    title &#x3D; &quot;北京&quot;

    def __init__(self, name, wx):
        self.name &#x3D; name
        self.wx &#x3D; wx

    def show(self):
        message &#x3D; &quot;姓名&#123;&#125;，微信：&#123;&#125;&quot;.format(self.name, self.wx)
        return message

    @property
    def message(self):
        return 666

    @staticmethod
    def something():
        return 999


obj &#x3D; Person(&quot;武沛齐&quot;, &quot;wupeiqi666&quot;)

print(getattr(obj, &#39;wx&#39;))
print(getattr(obj, &#39;message&#39;))  # obj.message
print(getattr(obj, &#39;show&#39;)())  # obj.show()
print(getattr(obj, &#39;something&#39;)())  # obj.something()</code></pre>

<p>答：</p>
<pre class="language-python" data-language="python"><code class="language-python">&gt;&gt;&gt; wupeiqi666
&gt;&gt;&gt; 666
&gt;&gt;&gt; 姓名武沛齐，微信wupeiqi666
&gt;&gt;&gt; 999</code></pre></li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Gengtianba</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://gengtianba.github.io/2022/06/15/python-mo-kuai-san-day1/">https://gengtianba.github.io/2022/06/15/python-mo-kuai-san-day1/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Gengtianba</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E7%AC%94%E8%AE%B0/">
                                    <span class="chip bg-color">笔记</span>
                                </a>
                            
                                <a href="/tags/python/">
                                    <span class="chip bg-color">python</span>
                                </a>
                            
                                <a href="/tags/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/">
                                    <span class="chip bg-color">第三阶段</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,wechat,weibo,douban,qzone,linkedin,twitter,facebook,google" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: '9YyPLPh0zyJlFMB2ciHdondz-gzGzoHsz',
        appKey: 'naTQJa37tbxowE4Gm70MF9b6',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/06/17/python-mo-kuai-san-day2/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="Python模块三day2">
                        
                        <span class="card-title">Python模块三day2</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            路飞学院PYTHON课程模块三笔记
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-06-17
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" class="post-category">
                                    路飞学院
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">笔记</span>
                    </a>
                    
                    <a href="/tags/python/">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                    <a href="/tags/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/">
                        <span class="chip bg-color">第三阶段</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/06/14/di-yi-jie-duan-chong-dian/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/1.jpg" class="responsive-img" alt="第一阶段重点">
                        
                        <span class="card-title">第一阶段重点</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            路飞学院Python数据分析课程第一阶段重点总结
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-06-14
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%B7%AF%E9%A3%9E%E5%AD%A6%E9%99%A2/" class="post-category">
                                    路飞学院
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/python/">
                        <span class="chip bg-color">python</span>
                    </a>
                    
                    <a href="/tags/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/">
                        <span class="chip bg-color">第一阶段</span>
                    </a>
                    
                    <a href="/tags/%E6%80%BB%E7%BB%93/">
                        <span class="chip bg-color">总结</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022</span>
            
            <span id="year">2022</span>
            <a href="/about" target="_blank">Gengtianba</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/gengtianba" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1138798275@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1138798275" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1138798275" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
